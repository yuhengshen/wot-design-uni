import{_ as e}from"./wd-search.CNdZJIuN.js";import{d as a,r as n,x as t,q as s,e as o,f as d,w as l,z as i,n as c,A as r,k as u,h as p,t as x,D as v,a0 as f,y as h,g as _,i as m,j as w,u as T,F as g,C as b,ad as y,ac as I,b as $,c as k,s as S}from"./index-ddWhPHnE.js";import{b as j,l as C,d as H,D as B,g as D,i as M,_ as V,p as q}from"./wd-icon.CdzlT4Xd.js";import{u as A,_ as E}from"./wd-cell.DKtYKzk0.js";import{u as F}from"./useChildren.8_evwfA-.js";import{a as Y,_ as z}from"./page-wraper.DJ6J_9uw.js";import"./index.CM-GNf6Q.js";import"./useTranslate.D-OItNaP.js";const G={...j,index:C([String,Number])},N={sticky:H(!1)},P=Symbol("wd-index-bar"),U=V(a({__name:"wd-index-anchor",props:G,setup(e,{expose:a}){const f=e,{parent:h}=A(P),_=n(`indexBar${B()}`),{proxy:m}=v(),w=n(0),T=t((()=>h&&h.props.sticky&&h.anchorState.activeIndex===f.index));return s((()=>{D(`#${_.value}`,!1,m).then((e=>{M(h)&&(w.value=Math.floor(e.top))}))})),a({top:w}),(e,a)=>{const n=u;return o(),d(n,{class:c(`wd-index-anchor ${T.value?"is-sticky":""} ${e.customClass}`),style:r(e.customStyle),id:_.value},{default:l((()=>[i(e.$slots,"default",{},(()=>[p(x(e.index),1)]),!0)])),_:3},8,["class","style","id"])}}}),[["__scopeId","data-v-2964c943"]]),J=V(a({__name:"wd-index-bar",props:N,setup(e){const a=e,t=n(`indexBar${B()}`),{proxy:r}=v(),$=f({activeIndex:null}),{linkChildren:k,children:S}=F(P);k({props:a,anchorState:$}),h((()=>S),(e=>{e.length?M($.activeIndex)&&e.find((e=>e.index===$.activeIndex))||($.activeIndex=e[0].index):$.activeIndex=null}),{deep:!0,immediate:!0});const j=f({scrollTop:0,prevScrollTop:0,touching:!1});let C=0,H={offsetTop:0,indexHeight:24};function V(e){if(j.touching)return;const{detail:a}=e,n=Math.floor(a.scrollTop),t=S.find(((e,a)=>!M(S[a+1])||e.$.exposed.top.value-C<=n&&S[a+1].$.exposed.top.value-C>n));M(t)&&$.activeIndex!==t.index&&($.activeIndex=t.index),j.prevScrollTop=n}function A(e){const a=e-H.offsetTop;let n=Math.floor(a/H.indexHeight);return n<0?n=0:n>S.length-1&&(n=S.length-1),S[n]}function E(){j.touching=!0}function Y(e){const a=e.touches[0].pageY;$.activeIndex!==A(a).index&&($.activeIndex=A(a).index,G(A(a).$.exposed.top.value-C))}async function z(e){const a=e.changedTouches[0].pageY;$.activeIndex=A(a).index,G(A(a).$.exposed.top.value-C),await q(),j.touching=!1}function G(e){j.scrollTop===e?(j.scrollTop=j.prevScrollTop,I((()=>{j.scrollTop=e}))):j.scrollTop=e}return s((()=>{setTimeout((()=>{Promise.all([D(`#${t.value}`,!1,r),D(".wd-index-bar__sidebar",!1,r),D(".wd-index-bar__index",!1,r)]).then((([e,a,n])=>{C=e.top,H.offsetTop=a.top,H.indexHeight=n.height}))}),100)})),(e,a)=>{const n=y,s=u;return o(),d(s,{class:"wd-index-bar",id:t.value},{default:l((()=>[_(n,{scrollTop:j.scrollTop,"scroll-y":!0,class:"wd-index-bar__content",onScroll:V},{default:l((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3},8,["scrollTop"]),_(s,{class:"wd-index-bar__sidebar",onTouchstart:b(E,["stop","prevent"]),onTouchmove:b(Y,["stop","prevent"]),onTouchend:b(z,["stop","prevent"]),onTouchcancel:b(z,["stop","prevent"])},{default:l((()=>[(o(!0),m(g,null,w(T(S),(e=>(o(),d(s,{class:c(["wd-index-bar__index",{"is-active":e.index===$.activeIndex}]),key:e.index},{default:l((()=>[p(x(e.index),1)])),_:2},1032,["class"])))),128))])),_:1})])),_:3},8,["id"])}}}),[["__scopeId","data-v-acb5dd36"]]),K=V(a({__name:"Index",setup(a){const{show:t}=Y();s((()=>{p()}));const i=n(""),c=n([]),r=[{index:"A",data:["阿坝","阿拉善","阿里","安康","安庆","鞍山","安顺","安阳","澳门"]},{index:"B",data:["北京","白银","保定","宝鸡","保山","包头","巴中","北海","蚌埠","本溪","毕节","滨州","百色","亳州"]},{index:"C",data:["重庆","成都","长沙","长春","沧州","常德","昌都","长治","常州","巢湖","潮州","承德","郴州","赤峰","池州","崇左","楚雄","滁州","朝阳"]},{index:"D",data:["大连","东莞","大理","丹东","大庆","大同","大兴安岭","德宏","德阳","德州","定西","迪庆","东营"]},{index:"E",data:["鄂尔多斯","恩施","鄂州"]},{index:"F",data:["福州","防城港","佛山","抚顺","抚州","阜新","阜阳"]},{index:"G",data:["广州","桂林","贵阳","甘南","赣州","甘孜","广安","广元","贵港","果洛"]},{index:"H",data:["杭州","哈尔滨","合肥","海口","呼和浩特","海北","海东","海南","海西","邯郸","汉中","鹤壁","河池","鹤岗","黑河","衡水","衡阳","河源","贺州","红河","淮安","淮北","怀化","淮南","黄冈","黄南","黄山","黄石","惠州","葫芦岛","呼伦贝尔","湖州","菏泽"]}];function p(){c.value=[],I((()=>{i.value?c.value=r.filter((e=>e.data.some((e=>e.includes(i.value))))):c.value=r}))}function x(){i.value="",p()}return(a,n)=>{const s=$(k("wd-search"),e),r=$(k("wd-index-anchor"),U),v=$(k("wd-cell"),E),f=u,h=$(k("wd-index-bar"),J),T=$(k("page-wraper"),z);return o(),d(T,null,{default:l((()=>[_(s,{"hide-cancel":"",placeholder:"我要去哪里？",modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),onSearch:p,onClear:x},null,8,["modelValue"]),_(f,{class:"wraper"},{default:l((()=>[c.value.length?(o(),d(h,{key:0,sticky:""},{default:l((()=>[(o(!0),m(g,null,w(c.value,(e=>(o(),d(f,{key:e.index},{default:l((()=>[_(r,{index:e.index},null,8,["index"]),(o(!0),m(g,null,w(e.data,(a=>(o(),d(v,{border:"",clickable:"",key:a,title:a,onClick:n=>function(e,a){t(`当前点击项：${e}，城市：${a}`)}(e.index,a)},null,8,["title","onClick"])))),128))])),_:2},1024)))),128))])),_:1})):S("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-a8db01e8"]]);export{K as default};

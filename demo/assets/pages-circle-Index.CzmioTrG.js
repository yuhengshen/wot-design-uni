import{u as e,_ as l}from"./wd-message-box.Bd4DmdxK.js";import{d as a,r as t,x as o,y as s,V as u,L as c,q as r,T as i,e as d,f as n,w as m,g as v,A as p,z as f,h as V,t as _,n as h,O as w,M as y,k,l as x,D as b,b as g,c as j}from"./index-ddWhPHnE.js";import{b as S,m as C,c as z,d as F,D as L,a as M,o as I,f as U,_ as P}from"./wd-icon.CdzlT4Xd.js";import{_ as T}from"./demo-block.C_jTIrrw.js";import{_ as O}from"./wd-button.D-L9G8tD.js";import{_ as W}from"./page-wraper.DJ6J_9uw.js";import"./index.CM-GNf6Q.js";import"./wd-input.DGujkWcB.js";import"./wd-cell.DKtYKzk0.js";import"./useTranslate.D-OItNaP.js";const $=P(a({name:"wd-circle",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...S,modelValue:C(0),size:C(100),color:{type:[String,Object],default:"#4d80f0"},layerColor:z("#EBEEF5"),fill:String,speed:C(50),text:String,strokeWidth:C(10),strokeLinecap:z("round"),clockwise:F(!0)},setup(e){const l=2*Math.PI,a=-Math.PI/2,g=1,j=e,S=t(""),C=t(0),z=t(null),F=t(1),P=t(`wd-circle${L()}`);let T=null;const O=o((()=>j.size)),W=o((()=>j.strokeWidth)),$=o((()=>{const e={width:M(j.size),height:M(j.size)};return`${I(e)};`}));s((()=>j.modelValue),(()=>{!function(){if(j.speed<=0||j.speed>1e3)return void q(j.modelValue);D(),C.value=C.value||0;const e=()=>{z.value=setTimeout((()=>{C.value!==j.modelValue?(Math.abs(C.value-j.modelValue)<g?C.value=j.modelValue:C.value<j.modelValue?C.value+=g:C.value-=g,q(C.value),e()):D()}),1e3/j.speed)};e()}()}),{immediate:!0}),s((()=>j.size),(()=>{let e=setTimeout((()=>{q(C.value),clearTimeout(e)}),50)}),{immediate:!1}),s((()=>j.color),(()=>{q(C.value)}),{immediate:!1,deep:!0}),u((()=>{F.value=c().pixelRatio})),r((()=>{C.value=j.modelValue,q(C.value)})),i((()=>{D()}));const{proxy:E}=b();function G(e,l,a,t,o){let s=W.value;const u=O.value/2;o||(s/=2);const c=u-s/2;e.strokeStyle=l,e.setStrokeStyle(l),e.setLineWidth(s),e.setLineCap(j.strokeLinecap),e.beginPath(),e.arc(u,u,c,a,t,!j.clockwise),e.stroke(),o&&(e.setLineWidth(s),e.setFillStyle(o),e.fill())}function q(e){new Promise((e=>{if(T)return e(T);T=w(P.value,E),e(T)})).then((t=>{t.clearRect(0,0,O.value,O.value),function(e){G(e,j.layerColor,0,l,j.fill)}(t);const o=(s=e,Math.min(Math.max(s,0),100));var s;0!==o?function(e,t){const o=l*(t/100),s=j.clockwise?a+o:3*Math.PI-(a+o);if(U(j.color)){const l=e.createLinearGradient(O.value,0,0,0);Object.keys(j.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,j.color[e]))),S.value=l}else S.value=j.color;G(e,S.value,a,s)}(t,o):function(e){const a=W.value,t=O.value/2;if(U(j.color)){const l=e.createLinearGradient(O.value,0,0,0);Object.keys(j.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,j.color[e]))),S.value=l}else S.value=j.color;e.beginPath(),e.arc(t,a/4,a/4,0,l),e.setFillStyle(S.value),e.fill()}(t),t.draw()}))}function D(){z.value&&clearTimeout(z.value)}return(e,l)=>{const a=y,t=k,o=x;return d(),n(t,{class:h(`wd-circle ${e.customClass}`),style:p(e.customStyle)},{default:m((()=>[v(a,{width:O.value,height:O.value,style:p($.value),id:P.value,"canvas-id":P.value},null,8,["width","height","style","id","canvas-id"]),e.text?(d(),n(o,{key:1,class:"wd-circle__text"},{default:m((()=>[V(_(e.text),1)])),_:1})):(d(),n(t,{key:0,class:"wd-circle__text"},{default:m((()=>[f(e.$slots,"default",{},void 0,!0)])),_:3}))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-96d4ed4f"]]),E=P(a({__name:"Index",setup(a){const o=t(20),s={0:"red",100:"white"};function u(){o.value<100&&(o.value+=10)}function c(){o.value>0&&(o.value-=10)}const r=e();function i(){r.alert("操作成功")}return(e,a)=>{const t=g(j("wd-message-box"),l),r=g(j("wd-circle"),$),p=g(j("demo-block"),T),f=k,h=g(j("wd-button"),O),w=g(j("page-wraper"),W);return d(),n(f,{class:"circle"},{default:m((()=>[v(w,null,{default:m((()=>[v(t),v(p,{title:"基础用法"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),text:o.value+"%"},null,8,["modelValue","text"])])),_:1}),v(p,{title:"样式定制"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),"stroke-width":6,text:"宽度定制"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value=e),"layer-color":"#eee",color:"#ee0a24",text:"颜色定制"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value=e),color:s,text:"渐变色"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value=e),color:"#07c160",clockwise:!1,text:"逆时针"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value=e),size:120,text:"大小定制"},null,8,["modelValue"])])),_:1}),v(p,{title:"使用slot"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value=e),"stroke-width":6},{default:m((()=>[v(f,{style:{color:"red"}},{default:m((()=>[V(_(o.value)+"%",1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(p,null,{default:m((()=>[v(h,{"custom-style":"margin-right:24rpx",type:"primary",size:"small",onClick:u},{default:m((()=>[V("增加")])),_:1}),v(h,{type:"error",size:"small",onClick:c},{default:m((()=>[V("减少")])),_:1})])),_:1}),v(p,{title:"alert"},{default:m((()=>[v(h,{onClick:i},{default:m((()=>[V("alert")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-7da3dbac"]]);export{E as default};

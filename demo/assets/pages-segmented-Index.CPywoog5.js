import{b as e,e as a,_ as t}from"./page-wraper.DJ6J_9uw.js";import{d as s,a0 as l,x as o,y as n,q as i,e as u,f as d,w as r,i as p,j as v,F as c,g as m,n as f,A as _,k as b,u as g,z as y,h,t as w,av as x,D as j,r as k,b as I,c as S,p as C}from"./index-ddWhPHnE.js";import{b as U,l as z,d as $,c as A,p as q,g as V,a as N,o as D,f as E,_ as F}from"./wd-icon.CdzlT4Xd.js";import{_ as G}from"./demo-block.C_jTIrrw.js";import{_ as H}from"./wd-button.D-L9G8tD.js";import"./wd-cell.DKtYKzk0.js";import"./index.CM-GNf6Q.js";const R=F(s({name:"wd-segmented",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...U,value:z([String,Number]),disabled:$(!1),size:A("middle"),options:{type:Array,required:!0,default:()=>[]},vibrateShort:$(!1)},emits:["update:value","change","click"],setup(e,{expose:a,emit:t}){const s=".wd-segmented__item",k=e,I=t,S=l({activeIndex:0,activeStyle:""}),C=o((()=>k.disabled||!(!k.options[0]||!E(k.options[0]))&&k.options[0].disabled));n((()=>k.value),(()=>{$(),z(),k.vibrateShort&&x({})}),{immediate:!1});const{proxy:U}=j();function z(e=!0){V(s,!0,U).then((a=>{const t=a[S.activeIndex],s={position:"absolute",width:N(t.width),"z-index":0},l=a.slice(0,S.activeIndex).reduce(((e,a)=>e+Number(a.width)),0);l&&(s.transform=`translateX(${l}px)`),e&&(s.transition="all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1)"),S.activeStyle=D(s)}))}function $(){const e=k.options.findIndex((e=>(E(e)?e.value:e)==k.value));if(e>=0)S.activeIndex=e;else{const e=E(k.options[0])?k.options[0].value:k.options[0];I("update:value",e),I("change",E(k.options[0])?k.options[0]:{value:e})}}return i((async()=>{$(),await q(),z(!1)})),a({updateActiveStyle:z}),(e,a)=>{const t=b;return u(),d(t,{class:f(`wd-segmented ${e.customClass}`),style:_(e.customStyle)},{default:r((()=>[(u(!0),p(c,null,v(e.options,((a,s)=>(u(),d(t,{class:f(`wd-segmented__item is-${e.size} ${S.activeIndex===s?"is-active":""} ${e.disabled||g(E)(a)&&a.disabled?"is-disabled":""}`),onClick:e=>function(e,a){if(k.disabled||E(e)&&e.disabled)return;const t=E(e)?e.value:e;S.activeIndex=a,z(),I("update:value",t),I("change",E(e)?e:{value:t}),I("click",E(e)?e:{value:t})}(a,s),key:s},{default:r((()=>[m(t,{class:"wd-segmented__item-label"},{default:r((()=>[e.$slots.label?y(e.$slots,"label",{key:0,option:g(E)(a)?a:{value:a}},void 0,!0):(u(),p(c,{key:1},[h(w(g(E)(a)?a.value:a),1)],64))])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),m(t,{class:f("wd-segmented__item--active "+(C.value?"is-disabled":"")),style:_(S.activeStyle)},null,8,["class","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-d826b72d"]]),T=F(s({__name:"Index",setup(s){const l=k(["评论","点赞","贡献","打赏"]),o=k([{value:"李雷",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/redpanda.jpg"}},{value:"韩梅梅",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/capybara.jpg"}},{value:"林涛",disabled:!0,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/panda.jpg"}},{value:"Tom",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/meng.jpg"}}]),n=k("简介"),i=k("详情"),p=k("评论"),v=k("打赏"),c=k("韩梅梅"),f=k("评论");function _(e){console.log(e)}const g=k("点赞"),y=k(),x=k(!1);function j(){x.value=!0}function U(){var e;null==(e=y.value)||e.updateActiveStyle()}return(s,k)=>{const z=I(S("wd-toast"),e),$=I(S("wd-segmented"),R),A=b,q=I(S("demo-block"),G),V=C,N=I(S("wd-button"),H),D=I(S("wd-popup"),a),E=I(S("page-wraper"),t);return u(),d(A,null,{default:r((()=>[m(z),m(E,null,{default:r((()=>[m(q,{title:"大型分段器",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m($,{options:l.value,value:n.value,"onUpdate:value":k[0]||(k[0]=e=>n.value=e),size:"large",onChange:_},null,8,["options","value"])])),_:1})])),_:1}),m(q,{title:"默认分段器",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m($,{options:l.value,value:i.value,"onUpdate:value":k[1]||(k[1]=e=>i.value=e)},null,8,["options","value"])])),_:1})])),_:1}),m(q,{title:"小型分段器",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m($,{options:l.value,value:p.value,"onUpdate:value":k[2]||(k[2]=e=>p.value=e),size:"small"},null,8,["options","value"])])),_:1})])),_:1}),m(q,{title:"带振动效果的分段器",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m($,{options:l.value,value:v.value,"onUpdate:value":k[3]||(k[3]=e=>v.value=e),"vibrate-short":!0},null,8,["options","value"])])),_:1})])),_:1}),m(q,{title:"禁用分段器",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m($,{options:l.value,value:f.value,"onUpdate:value":k[4]||(k[4]=e=>f.value=e),disabled:""},null,8,["options","value"])])),_:1})])),_:1}),m(q,{title:"自定义渲染分段器标签",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m($,{options:o.value,value:c.value,"onUpdate:value":k[5]||(k[5]=e=>c.value=e),"vibrate-short":!0,onChange:_},{label:r((({option:e})=>[m(A,{class:"section-slot"},{default:r((()=>[m(V,{style:{"border-radius":"50%",width:"32px",height:"32px"},src:e.payload.avatar},null,8,["src"]),m(A,{class:"name"},{default:r((()=>[h(w(e.value),1)])),_:2},1024)])),_:2},1024)])),_:1},8,["options","value"])])),_:1})])),_:1}),m(q,{title:"在弹出框中使用",transparent:""},{default:r((()=>[m(A,{class:"section"},{default:r((()=>[m(N,{onClick:j},{default:r((()=>[h("打开弹窗")])),_:1})])),_:1})])),_:1}),m(D,{modelValue:x.value,"onUpdate:modelValue":k[7]||(k[7]=e=>x.value=e),position:"bottom",onAfterEnter:U,closable:"","custom-style":"height: 200px;padding: 0 24rpx;"},{default:r((()=>[m(A,{class:"title"},{default:r((()=>[h("在弹出框中使用")])),_:1}),m($,{options:l.value,value:g.value,"onUpdate:value":k[6]||(k[6]=e=>g.value=e),onChange:_,ref_key:"segmentedRef",ref:y},null,8,["options","value"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-d36245c1"]]);export{T as default};

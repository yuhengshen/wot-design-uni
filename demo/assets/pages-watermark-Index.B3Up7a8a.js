import{d as e,y as a,r as t,ar as l,L as s,x as o,q as i,e as u,f as n,w as d,A as r,s as c,n as m,M as f,k as g,ac as p,b as v,c as _,i as h,g as y,h as w,F as b}from"./index-ddWhPHnE.js";import{b as z,c as x,m as k,d as $,k as j,D as I,Q as V,R as C,a as S,o as A,_ as X}from"./wd-icon.CdzlT4Xd.js";import{_ as D}from"./wd-button.D-L9G8tD.js";import{_ as F}from"./demo-block.C_jTIrrw.js";import{w as P}from"./wd-badge.C0Zs2Wt8.js";import{_ as R}from"./wd-cell.DKtYKzk0.js";import{_ as W}from"./wd-cell-group.Bs14hx2Q.js";import{_ as Y}from"./page-wraper.DJ6J_9uw.js";import"./index.CM-GNf6Q.js";import"./useChildren.8_evwfA-.js";const B=X(e({name:"wd-watermark",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...z,content:x(""),image:x(""),imageHeight:k(100),imageWidth:k(100),gutterX:k(0),gutterY:k(0),width:k(100),height:k(100),fullScreen:$(!0),color:x("#8c8c8c"),size:k(14),fontStyle:x("normal"),fontWeight:j("normal"),fontFamily:x("PingFang SC"),rotate:k(-25),zIndex:k(1100),opacity:k(.5)},setup(e){const v=e;a((()=>v),(()=>{x.value=!0,b.value=(v.height+v.gutterY)*w.value,z.value=(v.width+v.gutterX)*w.value,p((()=>{j()}))}),{deep:!0});const _=t(`water${I()}`),h=t(""),y=t(l("createOffscreenCanvas")&&Boolean(uni.createOffscreenCanvas)),w=t(s().pixelRatio),b=t((v.height+v.gutterY)*w.value),z=t((v.width+v.gutterX)*w.value),x=t(!0),k=o((()=>{let e="wd-watermark";return v.fullScreen&&(e=`${e} is-fullscreen`),`${e} ${v.customClass}`})),$=o((()=>{const e={opacity:v.opacity,backgroundSize:S(v.width+v.gutterX)};return h.value&&(e.backgroundImage=`url('${h.value}')`),`${A(e)};${v.customStyle}`}));function j(){x.value=!1;const{width:e,height:a,color:t,size:l,fontStyle:s,fontWeight:o,fontFamily:i,content:u,rotate:n,gutterX:d,gutterY:r,image:c,imageHeight:m,imageWidth:f}=v;!function(e,a,t,l,s,o,i,u,n,d,r,c,m,f){const g=(a+r)*w.value,p=(e+d)*w.value,v=e*w.value,_=a*w.value,y=l*w.value;!function(e,a,t,l,s,o,i,u,n,d,r,c,m,f){const g=document.createElement("canvas"),p=g.getContext("2d");if(g.setAttribute("width",`${a}px`),g.setAttribute("height",`${e}px`),p)if(c){!async function(e,a,t,l,s,o,i,u,n){e.translate(i/2,u/2),e.rotate(Math.PI/180*Number(o)),a.crossOrigin="anonymous",a.referrerPolicy="no-referrer",V(t)?a.src=t:a.src=C(t,{timestamp:`${(new Date).getTime()}`});a.onload=()=>{e.drawImage(a,-s*w.value/2,-l*w.value/2,s*w.value,l*w.value),e.restore(),h.value=n.toDataURL()}}(p,new Image,c,m,f,s,t,l,g)}else!function(e,a,t,l,s,o,i,u,n,d,r){e.textBaseline="middle",e.textAlign="center",e.translate(t/2,t/2),e.rotate(Math.PI/180*s),e.font=`${u} normal ${n} ${o}px/${l}px ${i}`,e.fillStyle=d,e.fillText(a,0,0),e.restore(),h.value=r.toDataURL()}(p,r,t,l,s,o,i,u,n,d,g);else console.error("无法获取canvas上下文，请确认当前环境是否支持canvas")}(g,p,v,_,n,y,i,s,o,t,u,c,m,f)}(e,a,t,l,s,o,i,u,n,d,r,c,m,f)}return i((()=>{j()})),(e,a)=>{const t=f,l=g;return u(),n(l,{class:m(k.value),style:r($.value)},{default:d((()=>[!y.value&&x.value?(u(),n(t,{key:0,type:"2d",style:r({height:b.value+"px",width:z.value+"px",visibility:"hidden"}),"canvas-id":_.value,id:_.value},null,8,["style","canvas-id","id"])):c("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-1e5caffb"]]),H=X(e({__name:"Index",setup(e){const a=t(!1),l=o((()=>a.value?"https://wot-design-uni.cn/logo.png":""));function s(e){a.value=e}return(e,a)=>{const t=v(_("wd-watermark"),B),o=v(_("wd-button"),D),i=v(_("demo-block"),F),n=v(_("wd-badge"),P),r=v(_("wd-cell"),R),c=v(_("wd-cell-group"),W),m=v(_("page-wraper"),Y),f=g;return u(),h(b,null,[y(t,{image:l.value,width:130,height:140,"image-width":38,content:"wot-design-uni","image-height":38,opacity:.5},null,8,["image"]),y(f,null,{default:d((()=>[y(m,null,{default:d((()=>[y(i,{title:"基础用法"},{default:d((()=>[y(o,{onClick:a[0]||(a[0]=e=>s(!1)),plain:""},{default:d((()=>[w("文字水印")])),_:1}),y(o,{onClick:a[1]||(a[1]=e=>s(!0)),plain:""},{default:d((()=>[w("图片水印")])),_:1})])),_:1}),y(i,{title:"展示效果"},{default:d((()=>[y(n,{"custom-class":"badge",modelValue:200,max:99},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("评论")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:200,max:10},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("回复")])),_:1})])),_:1})])),_:1}),y(i,{title:"局部水印"},{default:d((()=>[y(t,{opacity:.8,image:"https://wot-design-uni.cn/logo.png","image-width":38,"image-height":38,"full-screen":!1}),y(n,{"custom-class":"badge",modelValue:12},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("评论")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:3,"bg-color":"pink"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("回复")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:1,type:"primary"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("评论")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:2,type:"warning"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("回复")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:1,type:"success"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("评论")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:2,type:"info"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("回复")])),_:1})])),_:1}),y(c,{border:""},{default:d((()=>[y(r,{size:"large",title:"标题文字",value:"内容"}),y(r,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),y(r,{size:"large",title:"标题文字",label:"描述信息",value:"内容"}),y(r,{size:"large",title:"标题文字",value:"内容"}),y(r,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),y(r,{size:"large",title:"标题文字",label:"描述信息",value:"内容"})])),_:1})])),_:1}),y(i,{title:"展示效果"},{default:d((()=>[y(n,{"custom-class":"badge",modelValue:"new"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("评论")])),_:1})])),_:1}),y(n,{"custom-class":"badge",modelValue:"hot"},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("回复")])),_:1})])),_:1})])),_:1}),y(i,{title:"展示效果"},{default:d((()=>[y(n,{"custom-class":"badge","is-dot":""},{default:d((()=>[w("数据查询")])),_:1}),y(n,{"custom-class":"badge","is-dot":""},{default:d((()=>[y(o,{round:!1,type:"info",size:"small"},{default:d((()=>[w("回复")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-4cb437e1"]]);export{H as default};

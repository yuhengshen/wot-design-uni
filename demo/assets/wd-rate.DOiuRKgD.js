import{d as e,r as a,x as s,y as t,e as l,f as o,w as r,i as n,j as i,F as u,n as c,A as d,k as m,g as f,C as y,s as p,D as g}from"./index-ddWhPHnE.js";import{b as v,m as b,d as h,c as w,g as _,w as C,_ as k}from"./wd-icon.CdzlT4Xd.js";const x=k(e({name:"wd-rate",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...v,num:b(5),modelValue:{type:[String,Number,null],default:null},readonly:h(!1),size:w("16px"),space:w("4px"),color:w("#E8E8E8"),activeColor:{type:[String,Array],default:"linear-gradient(180deg, rgba(255,238,0,1) 0%,rgba(250,176,21,1) 100%)"},icon:w("star-on"),activeIcon:w("star-on"),disabled:h(!1),disabledColor:w("linear-gradient(315deg, rgba(177,177,177,1) 0%,rgba(199,199,199,1) 100%)"),allowHalf:h(!1)},emits:["update:modelValue","change"],setup(e,{emit:v}){const{proxy:b}=g(),h=e,w=v,k=a([]),x=a(""),z=s((()=>`background:${h.color};`)),A=s((()=>`background:${h.disabled?h.disabledColor:x.value};`));t((()=>h.activeColor),(e=>{Array.isArray(e)&&!e.length&&console.error("activeColor cannot be an empty array"),V()}),{immediate:!0,deep:!0}),t([()=>h.num,()=>h.modelValue],(()=>{!function(){const{modelValue:e,num:a,allowHalf:s}=h;if(null===e||!a)return;if("number"!=typeof e)return void console.error("[Wot Design] error(wd-rate): the value of wd-rate should be a number");const t=[],l=Math.floor(e);for(let o=0;o<a;o++)o<l?t.push("100%"):o===l&&s&&e%1!=0?t.push("50%"):t.push("0");k.value=t,V()}()}),{immediate:!0,deep:!0});const I=e=>"0"!==e;function V(){const{activeColor:e,modelValue:a,num:s}=h;let t="";t=Array.isArray(e)&&e.length?Number(a)<=.6*s||!e[1]?e[0]:e[1]:e,x.value=t}function H(e,a){if(h.readonly||h.disabled)return;const s=a?e+.5:e+1;w("update:modelValue",s),w("change",{value:s})}async function j(e){const{clientX:a}=e.touches[0],s=await _(".wd-rate__item",!0,b),t=Array.from(s).findIndex((e=>a>=e.left&&a<=e.right));if(-1!==t){const e=s[t],l=e.width,o=h.allowHalf&&a-e.left<l/2;(o?t+.5:t+1)>=.5&&H(t,o)}}return(e,a)=>{const s=m;return l(),o(s,{class:c(`wd-rate ${e.customClass}`),style:d(e.customStyle),onTouchmove:j},{default:r((()=>[(l(!0),n(u,null,i(k.value,((a,t)=>(l(),o(s,{key:t,"data-index":t,style:d({"margin-right":t==k.value.length-1?0:e.space}),class:"wd-rate__item"},{default:r((()=>[f(C,{"custom-class":"wd-rate__item-star",name:I(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"100%"===a?A.value:z.value,onClick:e=>H(t,!1)},null,8,["name","size","custom-style","onClick"]),h.allowHalf?(l(),o(s,{key:0,class:"wd-rate__item-half",onClick:y((e=>H(t,!0)),["stop"])},{default:r((()=>[f(C,{"custom-class":"wd-rate__item-star",name:I(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"0"!==a?A.value:z.value},null,8,["name","size","custom-style"])])),_:2},1032,["onClick"])):p("",!0)])),_:2},1032,["data-index","style"])))),128))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-43d06c75"]]);export{x as _};

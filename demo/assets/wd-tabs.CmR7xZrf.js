import{d as a,x as e,r as s,y as t,e as l,f as n,w as i,n as o,A as d,z as c,s as r,k as u,D as m,a0 as _,q as b,ac as p,b as w,c as f,g as v,i as y,j as h,u as g,F as x,h as k,t as I,ad as $,E as C,aa as S,l as N}from"./index-ddWhPHnE.js";import{b as T,k as L,m as j,d as V,q as z,c as P,i as H,o as W,C as X,u as q,_ as A,J as E,w as F,a as G,g as M,K as R}from"./wd-icon.CdzlT4Xd.js";import{u as D}from"./wd-cell.DKtYKzk0.js";import{w as J}from"./wd-badge.C0Zs2Wt8.js";import{w as K,a as O}from"./wd-sticky-box.dAidB1TO.js";import{u as B}from"./useTouch.BqsCmmvV.js";import{u as Q}from"./useChildren.8_evwfA-.js";import{u as U}from"./useTranslate.D-OItNaP.js";const Y=Symbol("wd-tabs"),Z={...T,modelValue:L(0),slidableNum:j(6),mapNum:j(10),mapTitle:String,sticky:V(!1),offsetTop:j(0),swipeable:V(!1),autoLineWidth:V(!1),lineWidth:z,lineHeight:z,color:P(""),inactiveColor:P(""),animated:V(!1),duration:j(300),slidable:P("auto")},aa=A(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...T,name:z,title:String,disabled:V(!1),lazy:V(!0),badgeProps:Object},setup(a){const _=a,{proxy:b}=m(),{parent:p,index:w}=D(Y),f=e((()=>!!H(p)&&p.state.activeIndex===w.value)),v=s(f.value),y=e((()=>{const a={};return f.value||H(p)&&p.props.animated||(a.display="none"),W(a)})),h=e((()=>!_.lazy||v.value||f.value));return t(f,(a=>{a&&(v.value=!0)})),t((()=>_.name),(a=>{!H(a)||X(a)||q(a)?p&&function(a){const{name:e}=_;if(null==e||""===e)return;p&&p.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(b):console.error("[wot design] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(a,e)=>{const s=u;return l(),n(s,{class:o(`wd-tab ${a.customClass}`),style:d(a.customStyle)},{default:i((()=>[h.value?(l(),n(s,{key:0,class:o(["wd-tab__body",{"wd-tab__body--inactive":!f.value}]),style:d(y.value)},{default:i((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):r("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3a26b2b4"]]),ea=A(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:Z,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:s,emit:T}){const L=".wd-tabs__nav-item",j=".wd-tabs__nav-item-text",V=".wd-tabs__nav-container",z=a,P=T,{translate:A}=U("tabs"),D=_({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:Z,linkChildren:aa}=Q(Y);aa({state:D,props:z});const{proxy:ea}=m(),sa=B(),ta=e((()=>"always"===z.slidable||Z.length>z.slidableNum)),la=e((()=>z.animated?W({left:-100*D.activeIndex+"%","transition-duration":z.duration+"ms","-webkit-transition-duration":z.duration+"ms"}):"")),na=(a,e)=>H(a.name)?a.name:e,ia=(a=0,e=!1,s=!0)=>{0!==Z.length&&(a=pa(a),Z[a].disabled||(D.activeIndex=a,s&&(ca(!1===e),ra()),function(){if(!D.inited)return;const a=na(Z[D.activeIndex],D.activeIndex);a!==z.modelValue&&(P("change",{index:D.activeIndex,name:a}),P("update:modelValue",a))}()))},oa=E(ia,100,{leading:!0});function da(){D.mapShow?(D.animating=!1,setTimeout((()=>{D.mapShow=!1}),300)):(D.mapShow=!0,setTimeout((()=>{D.animating=!0}),100))}async function ca(a=!0){if(!D.inited)return;const{autoLineWidth:e,lineWidth:s,lineHeight:t}=z;try{const l={};if(H(s))l.width=G(s);else if(e){const a=await M(j,!0,ea),e=Number(a[D.activeIndex].width);l.width=G(e)}H(t)&&(l.height=G(t),l.borderRadius=`calc(${G(t)} / 2)`);const n=await M(L,!0,ea),i=n[D.activeIndex];let o=n.slice(0,D.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(i.width)/2;o&&(l.transform=`translateX(${o}px) translateX(-50%)`,a&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),D.useInnerLine=!1,D.lineStyle=W(l))}catch(l){console.error("[wot design] error(wd-tabs): update line style failed",l)}}function ra(){D.inited&&Promise.all([M(L,!0,ea),M(V,!1,ea)]).then((([a,e])=>{const s=a[D.activeIndex],t=a.slice(0,D.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;t===D.scrollLeft?D.scrollLeft=t+Math.random()/1e4:D.scrollLeft=t}))}function ua(a){if(void 0===a)return;const{disabled:e}=Z[a],s=na(Z[a],a);e?P("disabled",{index:a,name:s}):(D.mapShow&&da(),oa(a),P("click",{index:a,name:s}))}function ma(a){z.swipeable&&sa.touchStart(a)}function _a(a){z.swipeable&&sa.touchMove(a)}function ba(){if(!z.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=sa;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==D.activeIndex?oa(D.activeIndex-1):e.value<0&&D.activeIndex!==Z.length-1&&oa(D.activeIndex+1))}function pa(a){if(X(a)&&a>=Z.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),q(a)){const e=Z.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return t((()=>z.modelValue),(a=>{X(a)||q(a)||console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&H(a)||console.error("[wot design] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),t((()=>z.modelValue),(a=>{const e=pa(a);oa(a,!1,e!==D.activeIndex)}),{immediate:!1,deep:!0}),t((()=>Z.length),(()=>{D.inited&&p((()=>{oa(z.modelValue)}))})),t((()=>z.slidableNum),(a=>{R(a,"slidableNum")})),t((()=>z.mapNum),(a=>{R(a,"mapNum")})),b((()=>{D.inited=!0,p((()=>{ia(z.modelValue,!0),D.useInnerLine=!0}))})),s({setActive:oa,scrollIntoView:ra,updateLineStyle:ca}),(a,e)=>{const s=N,t=w(f("wd-badge"),J),m=u,_=$;return a.sticky?(l(),n(O,{key:0},{default:i((()=>[v(m,{class:o(`wd-tabs ${a.customClass} ${ta.value?"is-slide":""} ${a.mapNum<g(Z).length&&0!==a.mapNum?"is-map":""}`),style:d(a.customStyle)},{default:i((()=>[v(K,{"offset-top":a.offsetTop},{default:i((()=>[v(m,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:i((()=>[v(m,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(_,{"scroll-x":ta.value,"scroll-with-animation":"","scroll-left":D.scrollLeft},{default:i((()=>[v(m,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,c)=>(l(),n(m,{onClick:a=>ua(c),key:c,class:o(`wd-tabs__nav-item  ${D.activeIndex===c?"is-active":""} ${e.disabled?"is-disabled":""}`),style:d(D.activeIndex===c?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(t,C(S({key:0},e.badgeProps)),{default:i((()=>[v(s,{class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(s,{key:1,class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)),D.activeIndex===c&&D.useInnerLine?(l(),n(m,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):r("",!0)])),_:2},1032,["onClick","class","style"])))),128)),v(m,{class:"wd-tabs__line",style:d(D.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<g(Z).length&&0!==a.mapNum?(l(),n(m,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(m,{class:o("wd-tabs__map-btn  "+(D.animating?"is-open":"")),onClick:da},{default:i((()=>[v(m,{class:o("wd-tabs__map-arrow  "+(D.animating?"is-open":""))},{default:i((()=>[v(F,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),v(m,{class:"wd-tabs__map-header",style:d(`${D.mapShow?"":"display:none;"}  ${D.animating?"opacity:1;":""}`)},{default:i((()=>[k(I(a.mapTitle||g(A)("all")),1)])),_:1},8,["style"]),v(m,{class:o("wd-tabs__map-body  "+(D.animating?"is-open":"")),style:d(D.mapShow?"":"display:none")},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,s)=>(l(),n(m,{class:"wd-tabs__map-nav-item",key:s,onClick:a=>ua(s)},{default:i((()=>[v(m,{class:o(`wd-tabs__map-nav-btn ${D.activeIndex===s?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:d(D.activeIndex===s?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[k(I(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):r("",!0)])),_:1})])),_:1},8,["offset-top"]),v(m,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:_a,onTouchend:ba,onTouchcancel:ba},{default:i((()=>[v(m,{class:o(["wd-tabs__body",a.animated?"is-animated":""]),style:d(la.value)},{default:i((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(m,{class:"wd-tabs__mask",style:d(`${D.mapShow?"":"display:none;"} ${D.animating?"opacity:1;":""}`),onClick:da},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),n(m,{key:1,class:o(`wd-tabs ${a.customClass} ${ta.value?"is-slide":""} ${a.mapNum<g(Z).length&&0!==a.mapNum?"is-map":""}`)},{default:i((()=>[v(m,{class:"wd-tabs__nav"},{default:i((()=>[v(m,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(_,{"scroll-x":ta.value,"scroll-with-animation":"","scroll-left":D.scrollLeft},{default:i((()=>[v(m,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,c)=>(l(),n(m,{onClick:a=>ua(c),key:c,class:o(`wd-tabs__nav-item ${D.activeIndex===c?"is-active":""} ${e.disabled?"is-disabled":""}`),style:d(D.activeIndex===c?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(t,S({key:0,"custom-class":"wd-tabs__nav-item-badge"},e.badgeProps),{default:i((()=>[v(s,{class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(s,{key:1,class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)),D.activeIndex===c&&D.useInnerLine?(l(),n(m,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):r("",!0)])),_:2},1032,["onClick","class","style"])))),128)),v(m,{class:"wd-tabs__line",style:d(D.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<g(Z).length&&0!==a.mapNum?(l(),n(m,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(m,{class:"wd-tabs__map-btn",onClick:da},{default:i((()=>[v(m,{class:o("wd-tabs__map-arrow "+(D.animating?"is-open":""))},{default:i((()=>[v(F,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),v(m,{class:"wd-tabs__map-header",style:d(`${D.mapShow?"":"display:none;"}  ${D.animating?"opacity:1;":""}`)},{default:i((()=>[k(I(a.mapTitle||g(A)("all")),1)])),_:1},8,["style"]),v(m,{class:o("wd-tabs__map-body "+(D.animating?"is-open":"")),style:d(D.mapShow?"":"display:none")},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((a,e)=>(l(),n(m,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>ua(e)},{default:i((()=>[v(m,{class:o(`wd-tabs__map-nav-btn ${D.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:i((()=>[k(I(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):r("",!0)])),_:1}),v(m,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:_a,onTouchend:ba,onTouchcancel:ba},{default:i((()=>[v(m,{class:o(["wd-tabs__body",a.animated?"is-animated":""]),style:d(la.value)},{default:i((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(m,{class:"wd-tabs__mask",style:d(`${D.mapShow?"":"display:none;"}  ${D.animating?"opacity:1":""}`),onClick:da},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-4430c8ed"]]);export{aa as _,ea as a};

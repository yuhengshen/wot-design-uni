import{d as e,r as a,y as l,q as s,x as c,e as u,f as t,w as o,g as r,z as d,A as n,n as i,h,t as v,u as f,s as p,l as m,k as _,a2 as y}from"./index-ddWhPHnE.js";import{b as w,c as C,d as x,m as g,p as b,w as k,o as S,_ as V}from"./wd-icon.CdzlT4Xd.js";import{u as $}from"./useTranslate.D-OItNaP.js";const I=V(e({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...w,customInputClass:C(""),modelValue:C(""),useSuffixSlot:x(!1),placeholder:String,cancelTxt:String,light:x(!1),hideCancel:x(!1),disabled:x(!1),maxlength:g(-1),placeholderLeft:x(!1),focus:x(!1),focusWhenClear:x(!1),placeholderStyle:String,placeholderClass:C("")},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:w}){const C=e,x=w,{translate:g}=$("search"),V=a(!1),I=a(!1),L=a(""),j=a(!0),T=a(!1);l((()=>C.modelValue),(e=>{L.value=e,e&&(I.value=!0)}),{immediate:!0}),l((()=>C.focus),(e=>{if(e){if(C.disabled)return;A()}})),s((()=>{C.focus&&A()}));const W=c((()=>`wd-search  ${C.light?"is-light":""}  ${C.hideCancel?"is-without-cancel":""} ${C.customClass}`)),q=c((()=>{const e={display:""===L.value&&j.value?"flex":"none"};return S(e)}));async function z(e){I.value=e,await b(),V.value=e}async function A(){C.disabled||(await b(100),j.value=!1,z(!0))}function B(e){L.value=e.detail.value,x("update:modelValue",e.detail.value),x("change",{value:e.detail.value})}async function F(){L.value="",T.value=!0,C.focusWhenClear&&(V.value=!1),await b(100),C.focusWhenClear?(j.value=!1,z(!0)):(j.value=!0,z(!1)),x("change",{value:""}),x("update:modelValue",""),x("clear")}function G({detail:{value:e}}){x("search",{value:e})}function H(){T.value?T.value=!1:(j.value=!1,x("focus",{value:L.value}))}function U(){T.value||(j.value=!L.value,I.value=!j.value,V.value=!1,x("blur",{value:L.value}))}function D(){x("cancel",{value:L.value})}return(e,a)=>{const l=m,s=_,c=y;return u(),t(s,{class:i(W.value),style:n(e.customStyle)},{default:o((()=>[r(s,{class:"wd-search__block"},{default:o((()=>[d(e.$slots,"prefix",{},void 0,!0),r(s,{class:"wd-search__field"},{default:o((()=>[e.placeholderLeft?p("",!0):(u(),t(s,{key:0,style:n(q.value),class:"wd-search__cover",onClick:A},{default:o((()=>[r(k,{name:"search","custom-class":"wd-search__search-icon"}),r(l,{class:i(`wd-search__placeholder-txt ${e.placeholderClass}`)},{default:o((()=>[h(v(e.placeholder||f(g)("search")),1)])),_:1},8,["class"])])),_:1},8,["style"])),I.value||L.value||e.placeholderLeft?(u(),t(k,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):p("",!0),I.value||L.value||e.placeholderLeft?(u(),t(c,{key:2,placeholder:e.placeholder||f(g)("search"),"placeholder-class":`wd-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),class:i(["wd-search__input",e.customInputClass]),onFocus:H,onInput:B,onBlur:U,onConfirm:G,disabled:e.disabled,maxlength:e.maxlength,focus:V.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):p("",!0),L.value?(u(),t(k,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:F})):p("",!0)])),_:1})])),_:3}),e.hideCancel?p("",!0):d(e.$slots,"suffix",{key:0},(()=>[r(s,{class:"wd-search__cancel",onClick:D},{default:o((()=>[h(v(e.cancelTxt||f(g)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-04bc9cf5"]]);export{I as _};

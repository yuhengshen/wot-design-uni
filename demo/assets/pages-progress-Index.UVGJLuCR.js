import{d as e,r as t,x as a,y as r,e as s,f as o,w as l,g as n,n as c,A as u,h as i,t as p,s as d,k as g,b as m,c as f}from"./index-ddWhPHnE.js";import{b as v,m as _,d as w,w as b,o as h,i as y,e as x,p as k,f as j,_ as N}from"./wd-icon.CdzlT4Xd.js";import{_ as T}from"./demo-block.C_jTIrrw.js";import{_ as C}from"./wd-button.D-L9G8tD.js";import{_ as O}from"./page-wraper.DJ6J_9uw.js";import"./index.CM-GNf6Q.js";import"./wd-cell.DKtYKzk0.js";const $=N(e({name:"wd-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...v,percentage:_(0),hideText:w(!1),color:{type:[String,Array]},duration:_(30),status:String},setup(e){const m=e,f=t(""),v=t(0),_=t(0);let w=null;const N=a((()=>h({background:f.value,width:`${v.value}%`,"transition-duration":_.value*m.duration*.001+"s"}))),T=a((()=>m.status?`is-${m.status}`:"")),C=a((()=>{let e="";switch(m.status){case"danger":e="close-outline";break;case"success":e="check-outline";break;case"warning":e="warn-bold"}return e}));async function O(){const{percentage:e,color:t}=m;if(!y(t)||x(t)&&0===t.length)return _.value=Math.abs(e-v.value),await k(),void(v.value=e);if(v.value===e)return;const a=x(t)?t:[t];!function(e){const t=(r=e,r.every((e=>"string"==typeof e))),a=$(e);var r;if(!t&&!a)throw Error("Color must be String or Object with color and percentage");if(a&&e.some((({percentage:e})=>Number.isNaN(e))))throw Error("All the percentage must can be formatted to Number")}(a);const r=function(e){const t=100/e.length;return $(e)?e.sort(((e,t)=>e.percentage-t.percentage)):e.map(((e,a)=>({color:e,percentage:(a+1)*t})))}(a);v.value>e?function(e,t){e.some((e=>{if(t<=e.percentage)return M(t,e.color),!0}))}(r,e):function(e,t){e.some(((a,r)=>{if(v.value<a.percentage&&a.percentage<=t)return M(a.percentage,a.color),!0;r===e.length-1&&M(t,a.color)}))}(r,e)}function $(e){return e.every((e=>j(e)&&Object.prototype.hasOwnProperty.call(e,"color")&&Object.prototype.hasOwnProperty.call(e,"percentage")))}function M(e,t){if(w)return;const{duration:a}=m;_.value=Math.abs(e-v.value),setTimeout((()=>{v.value=e,f.value=t,w=setTimeout((()=>{w&&clearTimeout(w),w=null,O()}),_.value*a)}),50)}return r((()=>[m.percentage,m.color,m.duration]),(()=>{var e;e=m.percentage,(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),O()}),{immediate:!0}),(e,t)=>{const a=g;return s(),o(a,{class:c(`wd-progress ${e.customClass}`),style:u(e.customStyle)},{default:l((()=>[n(a,{class:"wd-progress__outer"},{default:l((()=>[n(a,{class:c(`wd-progress__inner ${T.value}`),style:u(N.value)},null,8,["class","style"])])),_:1}),e.hideText?e.status?(s(),o(b,{key:1,"custom-class":`wd-progress__label wd-progress__icon ${T.value}`,name:C.value,color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):d("",!0):(s(),o(a,{key:0,class:"wd-progress__label"},{default:l((()=>[i(p(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-38fe3713"]]),M=e({__name:"Index",setup(e){const a=t(30),r=t(100),c=t(50),u=()=>{c.value=Math.min(c.value+10,100)},p=()=>{c.value=Math.max(c.value-10,0)},d=t([{color:"yellow",percentage:30},{color:"red",percentage:60},{color:"blue",percentage:80},{color:"black",percentage:90}]);return(e,t)=>{const g=m(f("wd-progress"),$),v=m(f("demo-block"),T),_=m(f("wd-button"),C),w=m(f("page-wraper"),O);return s(),o(w,null,{default:l((()=>[n(v,{title:"基本用法"},{default:l((()=>[n(g,{percentage:a.value},null,8,["percentage"])])),_:1}),n(v,{title:"不显示进度文字"},{default:l((()=>[n(g,{percentage:60,"hide-text":""})])),_:1}),n(v,{title:"进度条状态"},{default:l((()=>[n(g,{percentage:100,"hide-text":"",status:"success"}),n(g,{percentage:80,"hide-text":"",status:"danger"}),n(g,{percentage:90,"hide-text":"",status:"warning"})])),_:1}),n(v,{title:"修改颜色"},{default:l((()=>[n(g,{percentage:80,color:"#00c740"})])),_:1}),n(v,{title:"颜色数组"},{default:l((()=>[n(g,{percentage:100,color:["#00c740","#ffb300","#e2231a","#0083ff"]}),n(g,{percentage:r.value,color:d.value},null,8,["percentage","color"])])),_:1}),n(v,{title:"动态设置"},{default:l((()=>[n(g,{percentage:c.value},null,8,["percentage"]),n(_,{"custom-style":"margin-right: 10px;",onClick:u,type:"success",size:"small"},{default:l((()=>[i("+10")])),_:1}),n(_,{onClick:p,type:"error",size:"small"},{default:l((()=>[i("-10")])),_:1})])),_:1})])),_:1})}}});export{M as default};

import{d as e,r as t,x as a,a0 as l,y as n,q as o,af as i,W as s,ac as r,e as u,f as c,w as d,z as f,g as p,A as v,i as x,F as w,j as y,h as b,t as _,s as m,n as h,k as g,D as k,b as $,c as C,ag as j}from"./index-ddWhPHnE.js";import{b as D,c as T,d as S,m as A,w as F,o as I,i as P,e as z,g as q,_ as G}from"./wd-icon.CdzlT4Xd.js";import{_ as H}from"./demo-block.C_jTIrrw.js";import{_ as M}from"./wd-button.D-L9G8tD.js";import{_ as N}from"./page-wraper.DJ6J_9uw.js";import"./index.CM-GNf6Q.js";import"./wd-cell.DKtYKzk0.js";const V=G(e({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...D,text:{type:[String,Array],default:""},type:T("warning"),scrollable:S(!0),delay:A(1),speed:A(50),closable:S(!1),wrapable:S(!1),prefix:String,color:String,backgroundColor:String,direction:T("horizontal")},emits:["close","next","click"],setup(e,{expose:$,emit:C}){const j=".wd-notice-bar__wrap",D=".wd-notice-bar__content",T=e,S=C,A=t(0),G=t(!0),H=t(0),M=a((()=>Array.isArray(T.text)?T.text:[T.text])),N=a((()=>M.value[H.value])),V=t(0),W=t(null),X=t(null),Y=a((()=>"horizontal"===T.direction)),B=a((()=>"vertical"===T.direction)),E=l({transitionProperty:"unset",transitionDelay:"unset",transitionDuration:"unset",transform:"none",transitionTimingFunction:"linear"}),J=a((()=>I(E))),K=a((()=>{const e={};return P(T.color)&&(e.color=T.color),P(T.backgroundColor)&&(e.background=T.backgroundColor),`${I(e)};${T.customStyle}`})),L=a((()=>{const{type:e,wrapable:t,scrollable:a}=T;let l=[];return e&&l.push(`is-${e}`),Y.value?!t&&!a&&l.push("wd-notice-bar--ellipse"):l.push("wd-notice-bar--ellipse"),t&&!a&&l.push("wd-notice-bar--wrap"),l.join(" ")})),{proxy:O}=k();function Q(){U(),R()}function R(){r((()=>async function(){const[e,t]=await te();if(!e.width||!t.width||!t.height)return;W.value=e,X.value=t,A.value=e.width,Y.value?T.scrollable&&ee({duration:t.width/T.speed,delay:T.delay,translate:-t.width}):M.value.length>1&&ae(t.height)}()))}function U(){E.transitionProperty="unset",E.transitionDelay="unset",E.transitionDuration="unset",E.transform="none",E.transitionTimingFunction="linear",H.value=0,V.value=0}function Z(){G.value=!1,S("close")}function ee({duration:e,delay:t,translate:a}){E.transitionProperty="all",E.transitionDelay=`${t}s`,E.transitionDuration=`${e}s`,E.transform=`${"vertical"===T.direction?"translateY":"translateX"}(${a}px)`,E.transitionTimingFunction="linear"}function te(){return Promise.all([q(j,!1,O),q(D,!1,O)])}async function ae(e){const t=-e/(M.value.length+1)*(H.value+1);ee({duration:e/(M.value.length+1)/T.speed,delay:T.delay,translate:t})}function le(){Y.value?ee({duration:0,delay:0,translate:A.value+1}):++V.value>=M.value.length&&(V.value=0,ee({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{H.value>=M.value.length-1?H.value=0:H.value++,S("next",H.value),r((async()=>{try{const[e,t]=await te();W.value=e,X.value=t,A.value=e.width||0}catch(e){}X.value&&X.value.width&&X.value.height&&(Y.value?ee({duration:(A.value+X.value.width)/T.speed,delay:T.delay,translate:-X.value.width}):ae(X.value.height))})),clearTimeout(e)}),20)}function ne(){const e=z(T.text)?{index:H.value,text:T.text[H.value]}:{index:0,text:T.text};S("click",e)}return n((()=>T.text),(()=>{Q()}),{deep:!0}),o((()=>{R()})),i((()=>{R()})),s((()=>{U()})),$({reset:Q}),(e,t)=>{const a=g;return G.value?(u(),c(a,{key:0,class:h(`wd-notice-bar ${e.customClass} ${L.value}`),style:v(K.value)},{default:d((()=>[e.prefix?(u(),c(F,{key:0,"custom-class":"wd-notice-bar__prefix",name:e.prefix},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0),p(a,{class:"wd-notice-bar__wrap"},{default:d((()=>[p(a,{class:"wd-notice-bar__content",style:v(J.value),onTransitionend:le,onClick:ne},{default:d((()=>[B.value?(u(),x(w,{key:0},[(u(!0),x(w,null,y(M.value,(e=>(u(),c(a,{key:e},{default:d((()=>[b(_(e),1)])),_:2},1024)))),128)),M.value.length>1?(u(),c(a,{key:0},{default:d((()=>[b(_(M.value[0]),1)])),_:1})):m("",!0)],64)):f(e.$slots,"default",{key:1},(()=>[b(_(N.value),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(u(),c(F,{key:2,"custom-class":"wd-notice-bar__suffix",name:"close-bold",onClick:Z})):f(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):m("",!0)}}}),[["__scopeId","data-v-8ed555d4"]]),W=G(e({__name:"Index",setup(e){const a=t();function l(){var e;null==(e=a.value)||e.reset()}const n=t(["欢迎使用wot design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/Moonofweisheng/wot-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),o=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+n.value[e])};function i(e){console.log(e)}return(e,t)=>{const s=$(C("wd-notice-bar"),V),r=$(C("demo-block"),H),f=$(C("wd-icon"),F),v=$(C("wd-button"),M),x=g,w=$(C("page-wraper"),N);return u(),c(w,null,{default:d((()=>[p(x,null,{default:d((()=>[p(r,{title:"基本用法"},{default:d((()=>[p(s,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),p(r,{title:"类型修改"},{default:d((()=>[p(s,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),p(s,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),p(r,{title:"禁止滚动"},{default:d((()=>[p(s,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),p(r,{title:"插槽"},{default:d((()=>[p(s,{scrollable:!1},{prefix:d((()=>[p(f,{"custom-class":"prefix",name:"warn-bold"},{default:d((()=>[b("占位符")])),_:1})])),suffix:d((()=>[j("div",{style:{color:"#4d80f0"}},"查看")])),default:d((()=>[b(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),p(r,{title:"可关闭的"},{default:d((()=>[p(s,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),p(r,{title:"多行展示"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),p(r,{title:"自定义颜色"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),p(r,{title:"多文本轮播"},{default:d((()=>[p(s,{onClick:i,text:n.value,prefix:"check-outline",onNext:o},null,8,["text"])])),_:1}),p(r,{title:"垂直滚动"},{default:d((()=>[p(s,{onClick:i,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(s,{onClick:i,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1}),p(r,{title:"重置播放动画"},{default:d((()=>[p(s,{ref_key:"notice",ref:a,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(v,{onClick:l},{default:d((()=>[b("重置播放动画")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ea79056b"]]);export{W as default};

import{r as o,x as a,X as t}from"./index-ddWhPHnE.js";import{i as e}from"./wd-icon.CdzlT4Xd.js";import{u as s}from"./useRaf.DOkuWOZk.js";const n=1e3,r=60*n,l=60*r,i=24*l;function u(u){let f,h;const{start:c,cancel:m}=s((function(){u.millisecond?j():w()})),v=o(u.time),M=a((()=>{return{total:o=v.value,days:Math.floor(o/i),hours:Math.floor(o%i/l),minutes:Math.floor(o%l/r),seconds:Math.floor(o%r/n),milliseconds:Math.floor(o%n)};var o})),d=()=>{h=!1,m()},p=()=>Math.max(f-Date.now(),0),x=o=>{v.value=o,e(u.onChange)&&u.onChange(M.value),0===o&&(d(),e(u.onFinish)&&u.onFinish())},j=()=>{h&&(x(p()),v.value>0&&c())},w=()=>{if(h){const t=p();o=t,a=v.value,(Math.floor(o/1e3)!==Math.floor(a/1e3)||0===t)&&x(t),v.value>0&&c()}var o,a};return t(d),{start:()=>{h||(f=Date.now()+v.value,h=!0,c())},pause:d,reset:(o=u.time)=>{d(),v.value=o},current:M}}export{u};

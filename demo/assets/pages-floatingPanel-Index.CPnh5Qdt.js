import{d as a,r as e,x as t,y as s,V as l,L as o,e as n,f as r,w as u,g as d,n as i,z as c,C as h,A as m,k as v,ad as g,I as p,b as f,c as _,i as w,F as b,j,h as x,t as I,u as y}from"./index-ddWhPHnE.js";import{a as T,b as A,_ as $}from"./page-wraper.DJ6J_9uw.js";import{_ as B}from"./wd-cell.DKtYKzk0.js";import{_ as C}from"./wd-cell-group.Bs14hx2Q.js";import{b as M,m as V,n as H,d as S,V as k,k as D,a as F,o as z,W as P,_ as U}from"./wd-icon.CdzlT4Xd.js";import{u as Y}from"./useTouch.BqsCmmvV.js";import{_ as E,a as G}from"./wd-tabs.CmR7xZrf.js";import"./index.CM-GNf6Q.js";import"./useChildren.8_evwfA-.js";import"./wd-badge.C0Zs2Wt8.js";import"./wd-sticky-box.dAidB1TO.js";import"./wd-resize.DLUYo0pC.js";import"./useTranslate.D-OItNaP.js";const L=U(a({name:"wd-floating-panel",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...M,height:V(0),anchors:H(),safeAreaInsetBottom:S(!1),showScrollbar:k,duration:D(300),contentDraggable:k},emits:["update:height","height-change"],setup(a,{emit:p}){const f=Y(),_=a,w=p,b=e(_.height);let j;const x=e(0),I=e(!1),y=t((()=>({min:_.anchors[0]?_.anchors[0]:100,max:_.anchors[_.anchors.length-1]?_.anchors[_.anchors.length-1]:Math.round(.6*x.value)}))),T=t((()=>_.anchors.length>=2?_.anchors:[y.value.min,y.value.max])),A=t((()=>{const a={height:F(y.value.max),transform:`translateY(calc(100% + ${F(-b.value)}))`,transition:I.value?"none":`transform ${_.duration}ms cubic-bezier(0.18, 0.89, 0.32, 1.28)`};return`${z(a)};${_.customStyle}`})),$=a=>{b.value=a,w("update:height",a)},B=a=>{f.touchStart(a),I.value=!0,j=-b.value},C=a=>{if("content"==a.currentTarget.dataset.id&&!_.contentDraggable)return;f.touchMove(a);const e=f.deltaY.value+j;$(-V(e))},M=()=>{I.value=!1,$(P(T.value,b.value)),b.value!==-j&&w("height-change",{height:b.value})},V=a=>{const e=Math.abs(a),{min:t,max:s}=y.value;return e>s?-(s+.2*(e-s)):e<t?-(t-.2*(t-e)):a};return s((()=>_.height),(a=>{b.value=a})),s(y,(()=>{$(P(T.value,b.value))}),{immediate:!0}),l((()=>{const{windowHeight:a}=o();x.value=a})),(a,e)=>{const t=v,s=g;return n(),r(t,{class:i(`wd-floating-panel ${a.customClass} ${a.safeAreaInsetBottom?"is-safe":""}`),style:m(A.value),onTouchstartPassive:B,onTouchmovePassive:C,onTouchend:M,onTouchcancel:M},{default:u((()=>[d(t,{class:i("wd-floating-panel__header")},{default:u((()=>[d(t,{class:i("wd-floating-panel__header-bar")})])),_:1}),d(s,{class:i("wd-floating-panel__content"),"data-id":"content","show-scrollbar":a.showScrollbar,"scroll-y":"",onTouchmove:h(C,["stop","prevent"])},{default:u((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["show-scrollbar"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3746633c"]]),Q=U(a({__name:"Index",setup(a){const{show:t}=T(),s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l=e(0),r=e(0),i=e(0),c=e([]),h=({height:a})=>{t(F(a))};return p((()=>{i.value=o().windowHeight,c.value=[100,Math.round(.4*i.value),Math.round(.7*i.value)],r.value=c.value[1]})),(a,e)=>{const t=f(_("wd-toast"),A),o=f(_("wd-cell"),B),i=f(_("wd-cell-group"),C),m=f(_("wd-floating-panel"),L),g=f(_("wd-tab"),E),p=v,T=f(_("wd-tabs"),G),M=f(_("page-wraper"),$);return n(),w(b,null,[d(t),d(p,{class:"floating-panel"},{default:u((()=>[d(M,null,{default:u((()=>[d(T,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a)},{default:u((()=>[d(g,{title:"基础用法"},{default:u((()=>[d(m,{safeAreaInsetBottom:""},{default:u((()=>[d(i,{border:""},{default:u((()=>[(n(),w(b,null,j(s,(a=>d(o,{key:a,title:a},null,8,["title"]))),64))])),_:1})])),_:1})])),_:1}),d(g,{title:"自定义锚点"},{default:u((()=>[d(m,{height:r.value,"onUpdate:height":e[0]||(e[0]=a=>r.value=a),anchors:c.value,safeAreaInsetBottom:"",onHeightChange:h},{default:u((()=>[d(p,{class:"inner-content"},{default:u((()=>[x("自定义锚点 "+I(c.value.map(y(F)))+" - "+I(y(F)(r.value.toFixed(0))),1)])),_:1})])),_:1},8,["height","anchors"])])),_:1}),d(g,{title:"仅头部拖拽"},{default:u((()=>[d(m,{contentDraggable:!1},{default:u((()=>[d(p,{class:"inner-content"},{default:u((()=>[x("内容区不可以拖拽")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-29c5d28e"]]);export{Q as default};

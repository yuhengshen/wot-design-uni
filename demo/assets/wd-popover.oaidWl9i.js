import{d as e,S as o,r as s,y as t,q as l,V as a,X as n,e as c,f as r,w as u,g as p,n as i,h as d,t as m,s as _,i as v,j as y,F as w,u as f,A as k,z as C,C as b,D as h,k as S,l as j}from"./index-ddWhPHnE.js";import{b as g,c as A,d as $,m as x,w as V,e as P,_ as Q}from"./wd-icon.CdzlT4Xd.js";import{w as T,q as F}from"./page-wraper.DJ6J_9uw.js";import{u as I}from"./usePopover.zMYINgYp.js";import{r as O,p as q,c as z}from"./clickoutside.CJmLG0WC.js";const D=Q(e({name:"wd-popover",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...g,customArrow:A(""),customPop:A(""),visibleArrow:$(!0),content:[String,Object],placement:A("bottom"),offset:x(0),useContentSlot:$(!1),disabled:$(!1),showClose:$(!1),modelValue:$(!1),mode:A("normal")},emits:["update:modelValue","menuclick","change","open","close"],setup(e,{expose:g,emit:A}){const $=e,x=A,Q=o(F,null),D="popover",{proxy:G}=h(),H=I($.visibleArrow),J=s(!1);function X(e){E(!1),x("menuclick",{item:$.content[e],index:e})}function B(){$.disabled||E(!J.value)}function E(e){J.value=e,x("update:modelValue",e)}return t((()=>$.content),(e=>{const{mode:o}=$;"normal"===o&&"string"!=typeof e?console.error("The value type must be a string type in normal mode"):"menu"!==o||P(e)||console.error("The value type must be a Array type in menu mode")})),t((()=>$.placement),(()=>{H.init($.placement,$.visibleArrow,D)})),t((()=>$.modelValue),(e=>{J.value=e})),t((()=>J.value),(e=>{e&&(H.control($.placement,$.offset),Q&&Q.closeOther?Q.closeOther(G):z(G)),H.showStyle.value=e?"display: inline-block;":"display: none;",x("change",{show:e}),x(""+(e?"open":"close"))})),l((()=>{H.init($.placement,$.visibleArrow,D)})),a((()=>{Q&&Q.pushToQueue?Q.pushToQueue(G):q(G),H.showStyle.value=J.value?"opacity: 1;":"opacity: 0;"})),n((()=>{Q&&Q.removeFromQueue?Q.removeFromQueue(G):O(G)})),g({open:function(){E(!0)},close:function(){E(!1)}}),(e,o)=>{const s=S,t=j;return c(),r(s,{class:i(`wd-popover ${e.customClass}`),style:k(e.customStyle),id:"popover",onClick:b(f(H).noop,["stop"])},{default:u((()=>[p(s,{class:"wd-popover__pos wd-popover__hidden",id:"pos"},{default:u((()=>[p(s,{class:i(`wd-popover__container ${e.customPop}`)},{default:u((()=>[e.useContentSlot||"normal"!==e.mode?_("",!0):(c(),r(s,{key:0,class:"wd-popover__inner"},{default:u((()=>[d(m(e.content),1)])),_:1})),e.useContentSlot||"menu"!==e.mode||"object"!=typeof e.content?_("",!0):(c(),r(s,{key:1,class:"wd-popover__menu"},{default:u((()=>[(c(!0),v(w,null,y(e.content,((e,o)=>(c(),r(s,{key:o,class:"wd-popover__menu-inner",onClick:e=>X(o)},{default:u((()=>[e.iconClass?(c(),r(V,{key:0,name:e.iconClass,"custom-class":"wd-popover__icon"},null,8,["name"])):_("",!0),p(t,null,{default:u((()=>[d(m(e.content),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1},8,["class"])])),_:1}),p(T,{"custom-class":"wd-popover__pos","custom-style":f(H).popStyle.value,show:J.value,name:"fade",duration:200},{default:u((()=>[p(s,{class:i(`wd-popover__container ${e.customPop}`)},{default:u((()=>[$.visibleArrow?(c(),r(s,{key:0,class:i(`wd-popover__arrow ${f(H).arrowClass.value} ${e.customArrow}`),style:k(f(H).arrowStyle.value)},null,8,["class","style"])):_("",!0),e.useContentSlot||"normal"!==e.mode?_("",!0):(c(),r(s,{key:1,class:"wd-popover__inner"},{default:u((()=>[d(m(e.content),1)])),_:1})),e.useContentSlot||"menu"!==e.mode?C(e.$slots,"content",{key:3},void 0,!0):(c(),r(s,{key:2,class:"wd-popover__menu"},{default:u((()=>[(c(!0),v(w,null,y(e.content,((e,o)=>(c(),r(s,{key:o,class:"wd-popover__menu-inner",onClick:e=>X(o),style:k(0===o?"border-top: none":"")},{default:u((()=>["object"==typeof e&&e.iconClass?(c(),r(V,{key:0,name:e.iconClass,"custom-class":"wd-popover__icon"},null,8,["name"])):_("",!0),p(s,{style:{display:"inline-block"}},{default:u((()=>[d(m("object"==typeof e&&e.content?e.content:""),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1}))])),_:3},8,["class"]),e.showClose?(c(),r(V,{key:0,name:"close","custom-class":"wd-popover__close-icon",onClick:B})):_("",!0)])),_:3},8,["custom-style","show"]),p(s,{onClick:B,class:"wd-popover__target",id:"target"},{default:u((()=>[C(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["class","style","onClick"])}}}),[["__scopeId","data-v-afb9ce0f"]]);export{D as _};

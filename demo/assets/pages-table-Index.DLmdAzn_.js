import{d as e,r as l,x as a,e as t,f as o,w as r,i as d,j as s,F as i,n,u as c,A as p,k as u,z as b,h,t as g,l as f,a0 as m,g as w,s as _,ad as x,b as v,c as y}from"./index-ddWhPHnE.js";import{l as $,k,d as j,c as S,b as C,q as L,i as H,a as V,r as I,o as D,S as F,_ as M,D as R,f as U,J as E}from"./wd-icon.CdzlT4Xd.js";import{u as q}from"./wd-cell.DKtYKzk0.js";import{w as A}from"./wd-sort-button.BVGEQ0hC.js";import{u as G}from"./useTranslate.D-OItNaP.js";import{u as T}from"./useChildren.8_evwfA-.js";import{_ as z}from"./demo-block.C_jTIrrw.js";import{_ as B}from"./wd-pagination.3lATmTN7.js";import{_ as J}from"./page-wraper.DJ6J_9uw.js";import"./index.CM-GNf6Q.js";import"./wd-button.D-L9G8tD.js";const O={prop:$(String),label:$(String),width:k(100),sortable:j(!1),fixed:j(!1),align:S("left")},K={...C,data:$(Array),border:j(!0),stripe:j(!0),height:L,rowHeight:k(50),showHeader:j(!0),ellipsis:j(!0),index:{type:[Object,Boolean],default:!1},fixedHeader:j(!0)},N=Symbol("wd-table"),P=M(e({name:"wd-table-col",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:O,setup(e,{expose:m}){const w=e,{parent:_,index:x}=q(N),v=l(0),y=a((()=>!!H(_)&&_.props.stripe)),$=a((()=>!!H(_)&&_.props.border)),k=a((()=>!!H(_)&&_.props.ellipsis)),j=a((()=>{let e=!1;return w.fixed&&H(_)&&(e=_.getIsLastFixed(w)),e})),S=a((()=>{let e={};return H(w.width)&&(e.width=V(w.width)),w.fixed&&H(_)&&I(_.getFixedStyle)&&(e=_.getFixedStyle(x.value,e)),e})),C=a((()=>{let e={};const l=H(_)?_.props.rowHeight:50;return H(l)&&(e.height=V(l)),w.fixed&&H(_)&&I(_.getFixedStyle)&&(e=_.getFixedStyle(x.value,e)),D(e)})),L=a((()=>{if(!H(_))return[];return _.props.data.map((e=>e[w.prop]))}));function M(e){return H(_)&&_.props.data[e]||{}}return m({sortDirection:v}),(e,l)=>{const a=f,m=u;return t(),o(m,{class:n(`wd-table-col ${e.fixed?"wd-table-col--fixed":""} ${j.value&&c(H)(c(_))&&c(_).state.scrollLeft?"is-shadow":""}`),style:p(S.value)},{default:r((()=>[(t(!0),d(i,null,s(L.value,((l,d)=>(t(),o(m,{class:n(`wd-table__cell ${y.value&&c(F)(d)?"is-stripe":""} ${$.value?"is-border":""} is-${e.align}`),key:d,style:p(C.value),onClick:e=>function(e){H(_)&&I(_.rowClick)&&_.rowClick(e)}(d)},{default:r((()=>[e.$slots.value?b(e.$slots,"value",{key:0,row:M(d),index:d},void 0,!0):(t(),o(a,{key:1,class:n("wd-table__value "+(k.value?"is-ellipsis":""))},{default:r((()=>[h(g(l),1)])),_:2},1032,["class"]))])),_:2},1032,["class","style","onClick"])))),128))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3fd18cf6"]]),Q=M(e({name:"wd-table",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:K,emits:["sort-method","row-click"],setup(e,{emit:v}){const{translate:y}=G("tableCol"),$=e,k=v,j=m({scrollLeft:0}),{linkChildren:S,children:C}=T(N);S({props:$,state:j,rowClick:function(e){k("row-click",{rowIndex:e})},getIsLastFixed:B,getFixedStyle:O});const L=R(),I=l({prop:L,label:y("indexLabel"),width:"100rpx",sortable:!1,fixed:!1,align:"left",...U($.index)?$.index:{}}),F=E((function(e){j.scrollLeft=e.detail.scrollLeft}),100,{leading:!1}),M=a((()=>{const e={};return H($.height)&&(e["max-height"]=V($.height)),`${D(e)};${$.customStyle}`})),q=a((()=>{const e={display:"flex"};let l="";return C.forEach((e=>{l=l?`${l} + ${V(e.width)}`:V(e.width)})),e.width=`calc(${l})`,D(e)})),z=a((()=>{const e={};return H($.height)&&(e.height=H($.rowHeight)?`calc(${$.data.length} * ${V($.rowHeight)})`:`calc(${$.data.length} * 50px)`),`${D(e)};`}));function B(e){let l=!1;if(e.fixed&&H(C)){const a=C.filter((e=>e.fixed));a.length&&a[a.length-1].prop===e.prop&&(l=!0)}return l}function J(e){let l={};return H(C[e].width)&&(l.width=V(C[e].width)),C[e].fixed&&(l=O(e,l)),D(l)}function O(e,l){if(e>0){let a="";C.forEach(((l,t)=>{t<e&&(a=a?`${a} + ${V(l.width)}`:V(l.width))})),l.left=`calc(${a})`}else l.left=0;return l}function K(e,l){C[l].$.exposed.sortDirection.value=e,C.forEach(((e,a)=>{l!=a&&(e.$.exposed.sortDirection.value=0)}));const a={prop:C[l].prop,label:C[l].label,width:C[l].width,sortable:C[l].sortable,align:C[l].align,sortDirection:e,fixed:C[l].fixed};k("sort-method",a)}return(e,l)=>{const a=f,m=u,v=x;return t(),o(m,{class:n(`wd-table ${e.border?"is-border":""} ${e.customClass}`),style:p(M.value)},{default:r((()=>[e.fixedHeader?(t(),d(i,{key:0},[e.showHeader?(t(),o(v,{key:0,"enable-flex":!0,throttle:!1,scrollLeft:j.scrollLeft,"scroll-x":!0,class:"wd-table__header",onScroll:c(F)},{default:r((()=>[w(m,{id:"table-header",class:"wd-table__content wd-table__content--header",style:p(q.value)},{default:r((()=>[(t(!0),d(i,null,s(c(C),((l,d)=>(t(),o(m,{class:n(`wd-table__cell ${e.border?"is-border":""} ${l.fixed?"is-fixed":""} ${e.stripe?"is-stripe":""} is-${l.align} ${B(l)&&j.scrollLeft?"is-shadow":""}`),style:p(J(d)),key:d},{default:r((()=>[l.sortable?(t(),o(A,{key:0,modelValue:l.$.exposed.sortDirection.value,"onUpdate:modelValue":e=>l.$.exposed.sortDirection.value=e,"allow-reset":"",line:!1,title:l.label,onChange:({value:e})=>K(e,d)},null,8,["modelValue","onUpdate:modelValue","title","onChange"])):(t(),o(a,{key:1,class:n("wd-table__value "+(e.ellipsis?"is-ellipsis":""))},{default:r((()=>[h(g(l.label),1)])),_:2},1032,["class"]))])),_:2},1032,["class","style"])))),128))])),_:1},8,["style"])])),_:1},8,["scrollLeft","onScroll"])):_("",!0),w(v,{class:"wd-table__body",style:p(z.value),"enable-flex":!0,throttle:!1,"scroll-x":!0,onScroll:c(F),scrollLeft:j.scrollLeft},{default:r((()=>[w(m,{id:"table-body",class:"wd-table__content",style:p(q.value)},{default:r((()=>[!1!==e.index?(t(),o(P,{key:0,prop:I.value.prop,label:I.value.label,width:I.value.width,sortable:I.value.sortable,fixed:I.value.fixed,align:I.value.align},{value:r((({index:e})=>[w(a,null,{default:r((()=>[h(g(e+1),1)])),_:2},1024)])),_:1},8,["prop","label","width","sortable","fixed","align"])):_("",!0),b(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style","onScroll","scrollLeft"])],64)):(t(),o(v,{key:1,class:"wd-table__wrapper","enable-flex":!0,throttle:!1,"scroll-x":!0,onScroll:c(F),scrollLeft:j.scrollLeft},{default:r((()=>[w(m,{class:"wd-table__inner",style:p(q.value)},{default:r((()=>[e.showHeader?(t(),o(m,{key:0,class:"wd-table__header-row"},{default:r((()=>[(t(!0),d(i,null,s(c(C),((l,d)=>(t(),o(m,{key:d,class:n(`wd-table__cell ${e.border?"is-border":""} ${l.fixed?"is-fixed":""} ${e.stripe?"is-stripe":""} is-${l.align} ${B(l)&&j.scrollLeft?"is-shadow":""}`),style:p(J(d))},{default:r((()=>[l.sortable?(t(),o(A,{key:0,modelValue:l.$.exposed.sortDirection.value,"onUpdate:modelValue":e=>l.$.exposed.sortDirection.value=e,"allow-reset":"",line:!1,title:l.label,onChange:({value:e})=>K(e,d)},null,8,["modelValue","onUpdate:modelValue","title","onChange"])):(t(),o(a,{key:1,class:n("wd-table__value "+(e.ellipsis?"is-ellipsis":""))},{default:r((()=>[h(g(l.label),1)])),_:2},1032,["class"]))])),_:2},1032,["class","style"])))),128))])),_:1})):_("",!0),w(m,{class:"wd-table__content",style:p(z.value)},{default:r((()=>[!1!==e.index?(t(),o(P,{key:0,prop:I.value.prop,label:I.value.label,width:I.value.width,sortable:I.value.sortable,fixed:I.value.fixed,align:I.value.align},{value:r((({index:e})=>[w(a,null,{default:r((()=>[h(g(e+1),1)])),_:2},1024)])),_:1},8,["prop","label","width","sortable","fixed","align"])):_("",!0),b(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style"])])),_:3},8,["onScroll","scrollLeft"]))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-061231cb"]]),W=M(e({__name:"Index",setup(e){const d=l([{name:"关羽",school:"武汉市阳逻绿豆学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:66,compare:"48%",hobby:"颜良文丑，以吾观之，如土鸡瓦犬耳。"},{name:"刘备",school:"武汉市阳逻编织学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:68,compare:"21%",hobby:"我得空明，如鱼得水也"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"孔明",school:"武汉市阳逻卧龙学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:99,compare:"18%",hobby:"兴汉讨贼，克复中原"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:36,compare:"48%",hobby:"子龙，子龙，世无双"},{name:"关羽",school:"武汉市阳逻绿豆学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:66,compare:"48%",hobby:"颜良文丑，以吾观之，如土鸡瓦犬耳。"},{name:"刘备",school:"武汉市阳逻编织学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:68,compare:"21%",hobby:"我得空明，如鱼得水也"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"孔明",school:"武汉市阳逻卧龙学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:99,compare:"18%",hobby:"兴汉讨贼，克复中原"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:36,compare:"48%",hobby:"子龙，子龙，世无双"},{name:"关羽",school:"武汉市阳逻绿豆学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:66,compare:"48%",hobby:"颜良文丑，以吾观之，如土鸡瓦犬耳。"},{name:"刘备",school:"武汉市阳逻编织学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:68,compare:"21%",hobby:"我得空明，如鱼得水也"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"孔明",school:"武汉市阳逻卧龙学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:99,compare:"18%",hobby:"兴汉讨贼，克复中原"}]),s=l(1),i=l(10),n=l(d.value.length),c=a((()=>d.value.slice((s.value-1)*i.value,s.value*i.value)));function p(e){d.value=d.value.reverse()}function b({rowIndex:e}){console.log(e)}return(e,l)=>{const a=v(y("wd-table-col"),P),i=v(y("wd-table"),Q),m=v(y("demo-block"),z),_=f,x=u,$=v(y("wd-pagination"),B),k=v(y("page-wraper"),J);return t(),o(k,null,{default:r((()=>[w(m,{title:"基本用法"},{default:r((()=>[w(i,{data:d.value,onSortMethod:p,height:400,onRowClick:b},{default:r((()=>[w(a,{prop:"name",label:"姓名",align:"center",width:"50%"}),w(a,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),w(m,{title:"无边框"},{default:r((()=>[w(i,{data:d.value,onSortMethod:p,height:400,border:!1,onRowClick:b},{default:r((()=>[w(a,{prop:"name",label:"姓名",align:"center",width:"50%"}),w(a,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),w(m,{title:"无斑马纹"},{default:r((()=>[w(i,{data:d.value,onSortMethod:p,height:400,stripe:!1,onRowClick:b},{default:r((()=>[w(a,{prop:"name",label:"姓名",align:"center",width:"50%"}),w(a,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),w(m,{title:"不展示表头"},{default:r((()=>[w(i,{data:d.value,onSortMethod:p,height:400,"show-header":!1,onRowClick:b},{default:r((()=>[w(a,{prop:"name",label:"姓名",align:"center",width:"50%"}),w(a,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),w(m,{title:"固定列"},{default:r((()=>[w(i,{data:d.value,onSortMethod:p,onRowClick:b,height:400},{default:r((()=>[w(a,{prop:"name",label:"姓名",fixed:"",sortable:"",align:"center"}),w(a,{prop:"grade",label:"分数",fixed:"",sortable:"",align:"center"}),w(a,{prop:"hobby",label:"一言以蔽之",sortable:"",width:160}),w(a,{prop:"school",label:"求学之所",width:180}),w(a,{prop:"major",label:"专业"}),w(a,{prop:"gender",label:"性别"})])),_:1},8,["data"])])),_:1}),w(m,{title:"显示索引"},{default:r((()=>[w(i,{data:d.value,height:400,onSortMethod:p,index:{align:"center"}},{default:r((()=>[w(a,{prop:"name",label:"姓名",sortable:"",align:"center"}),w(a,{prop:"grade",label:"分数",sortable:"",align:"center"}),w(a,{prop:"hobby",label:"一言以蔽之",sortable:"",width:160}),w(a,{prop:"school",label:"求学之所",width:180}),w(a,{prop:"major",label:"专业"}),w(a,{prop:"gender",label:"性别"})])),_:1},8,["data"])])),_:1}),w(m,{title:"自定义列模板"},{default:r((()=>[w(i,{data:d.value,onSortMethod:p,onRowClick:b,height:400},{default:r((()=>[w(a,{prop:"name",label:"姓名",fixed:"",sortable:"",align:"center"}),w(a,{prop:"grade",label:"分数",fixed:"",sortable:"",align:"center"},{value:r((({row:e})=>[w(x,{class:"custom-class"},{default:r((()=>[w(_,null,{default:r((()=>[h(g(e.grade),1)])),_:2},1024),w(_,null,{default:r((()=>[h("同比"+g(e.compare),1)])),_:2},1024)])),_:2},1024)])),_:1}),w(a,{prop:"hobby",label:"一言以蔽之",sortable:"",width:160}),w(a,{prop:"school",label:"求学之所",width:180}),w(a,{prop:"major",label:"专业"}),w(a,{prop:"gender",label:"性别"}),w(a,{prop:"graduation",label:"学成时间"})])),_:1},8,["data"])])),_:1}),w(m,{title:"不固定表头结合分页器"},{default:r((()=>[w(i,{data:c.value,"fixed-header":!1},{default:r((()=>[w(a,{prop:"name",label:"姓名",fixed:"",align:"center"}),w(a,{prop:"grade",label:"分数",fixed:"",align:"center"}),w(a,{prop:"hobby",label:"一言以蔽之",width:160}),w(a,{prop:"school",label:"求学之所",width:180}),w(a,{prop:"major",label:"专业"}),w(a,{prop:"gender",label:"性别"})])),_:1},8,["data"]),w($,{"custom-style":"border: 1px solid #ececec;border-top:none",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),total:n.value},null,8,["modelValue","total"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-9c09ef5f"]]);export{W as default};

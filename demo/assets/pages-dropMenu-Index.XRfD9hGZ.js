import{u as e,_ as o}from"./wd-message-box.Bd4DmdxK.js";import{d as l,S as a,r as t,x as n,y as u,V as s,X as d,e as i,f as r,w as p,g as c,i as m,j as v,F as f,z as _,n as g,A as b,s as w,D as y,k as V,h,t as C,l as x,L as k,b as $,c as j,u as K,C as z}from"./index-ddWhPHnE.js";import{e as S,q as U,d as I,_ as T}from"./page-wraper.DJ6J_9uw.js";import{b as N,m as P,c as M,d as O,n as F,r as B,w as D,i as Q,_ as A,D as E,g as H}from"./wd-icon.CdzlT4Xd.js";import{p as L,r as q,c as G}from"./clickoutside.CJmLG0WC.js";import{u as J,_ as X}from"./wd-cell.DKtYKzk0.js";import{u as R}from"./useChildren.8_evwfA-.js";import{_ as W}from"./demo-block.C_jTIrrw.js";import{_ as Y}from"./wd-slider.BDUAvyxg.js";import{_ as Z}from"./wd-button.D-L9G8tD.js";import{w as ee}from"./wd-sort-button.BVGEQ0hC.js";import"./index.CM-GNf6Q.js";import"./wd-input.DGujkWcB.js";import"./useTranslate.D-OItNaP.js";import"./useTouch.BqsCmmvV.js";const oe=Symbol("wd-drop-menu"),le={...N,zIndex:P(12),direction:M("down"),modal:O(!0),closeOnClickModal:O(!0),duration:P(200)},ae=A(l({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...N,customTitle:M(""),customIcon:M(""),modelValue:[String,Number],options:F(),disabled:O(!1),iconName:M("check"),title:String,icon:M("arrow-down"),iconSize:M("14px"),beforeToggle:Function,valueKey:M("value"),labelKey:M("label"),tipKey:M("tip"),customPopupClass:M(""),customPopupStyle:M("")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:o,emit:l}){const k=e,$=l,j=a(U,null),K=t(!1),z=t(!1),I=t(),T=t(12),N=t(!0),P=t(!0),M=t(0),{parent:O}=J(oe),{proxy:F}=y(),A=n((()=>{let e="";return e=K.value&&O?"down"===O.props.direction?`top: calc(var(--window-top) + ${O.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${O.offset.value}px)`:"",e}));function E(){z.value&&(B(k.beforeToggle)?k.beforeToggle({status:!1,resolve:e=>{e&&H()}}):H())}function H(){z.value&&(z.value=!1)}function G(){z.value||(B(k.beforeToggle)?k.beforeToggle({status:!0,resolve:e=>{e&&X()}}):X())}function X(){K.value=!0,z.value=!0,O&&(N.value=Boolean(O.props.modal),M.value=Number(O.props.duration),P.value=Boolean(O.props.closeOnClickModal),I.value="down"===O.props.direction?"top":"bottom"),$("open")}function R(){K.value=!1,$("closed")}function W(){$("open")}function Y(){$("opened")}function Z(){$("close")}return u((()=>k.modelValue),(e=>{Q(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),s((()=>{j&&j.pushToQueue?j.pushToQueue(F):L(F)})),d((()=>{j&&j.removeFromQueue?j.removeFromQueue(F):q(F)})),o({getShowPop:function(){return z.value},open:G,close:E,toggle:function(){z.value?E():G()}}),(e,o)=>{const l=x,a=V;return K.value?(i(),r(a,{key:0,class:g(`wd-drop-item  ${e.customClass}`),style:b(`z-index: ${T.value}; ${A.value};${e.customStyle}`)},{default:p((()=>[c(S,{modelValue:z.value,"onUpdate:modelValue":o[0]||(o[0]=e=>z.value=e),"z-index":T.value,duration:M.value,position:I.value,"custom-style":`position: absolute; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,"modal-style":"position: absolute;",modal:N.value,"close-on-click-modal":!1,onClickModal:o[1]||(o[1]=e=>P.value&&E()),onBeforeEnter:W,onAfterEnter:Y,onBeforeLeave:Z,onAfterLeave:R},{default:p((()=>[e.options.length?(i(),r(a,{key:0},{default:p((()=>[(i(!0),m(f,null,v(e.options,((o,t)=>(i(),r(a,{key:t,onClick:e=>function(e){if(k.disabled)return;const{valueKey:o}=k,l=k.options[e],a=void 0!==l[o]?l[o]:l;$("update:modelValue",a),$("change",{value:a,selectedItem:l}),E()}(t),class:g("wd-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:p((()=>[c(a,{class:g(`wd-drop-item__title ${e.customTitle}`)},{default:p((()=>[c(l,null,{default:p((()=>[h(C(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(i(),r(l,{key:0,class:"wd-drop-item__tip"},{default:p((()=>[h(C(o[e.tipKey]),1)])),_:2},1024)):w("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(i(),r(D,{key:0,name:e.iconName,size:"20px",class:g(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):w("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):_(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class","modal"])])),_:3},8,["class","style"])):w("",!0)}}}),[["__scopeId","data-v-b5fcfeab"]]),te=A(l({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:le,setup(e){const o=e,l=a(U,null),n=t(`dropMenuId${E()}`),d=t(0),w=t(0),{proxy:x}=y(),{linkChildren:S,children:I}=R(oe);function T(e){e.preventDefault(),e.stopPropagation()}function N(e){const{title:o,modelValue:l,options:a,valueKey:t,labelKey:n}=e;if(o)return o;for(let u=0,s=a.length;u<s;u++)if(l===a[u][t])return a[u][n];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function P(e){H(`#${n.value}`,!1,x).then((l=>{if(!l)return;const{top:a,bottom:t}=l;"down"===o.direction?d.value=Number(t):d.value=w.value-Number(a),e.$.exposed.toggle()}))}return S({props:o,fold:P,offset:d}),u((()=>o.direction),(e=>{["up","down"].includes(e)||console.error("[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),s((()=>{w.value=k().windowHeight})),(e,o)=>{const a=V,t=$(j("wd-icon"),D);return i(),r(a,{style:b(e.customStyle),class:g(`wd-drop-menu ${e.customClass}`),onClick:z(T,["stop"]),id:n.value},{default:p((()=>[c(a,{class:"wd-drop-menu__list"},{default:p((()=>[(i(!0),m(f,null,v(K(I),((e,o)=>(i(),r(a,{key:o,onClick:o=>function(e){e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):G(e),P(e))}(e),class:g(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:p((()=>[c(a,{class:"wd-drop-menu__item-title"},{default:p((()=>[c(a,{class:"wd-drop-menu__item-title-text"},{default:p((()=>[h(C(N(e)),1)])),_:2},1024),c(t,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),_(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-d3c8be25"]]),ne=A(l({__name:"Index",setup(l){const{closeOutside:a}=I(),n=e(),u=t(),s=t(),d=t(30);t(!1);const m=t(1),v=t(0),f=t(0),_=t(0),g=t(0),b=t(0),w=t(0),y=t(0),C=t(0),x=t(0),k=t([{label:"全部商品",value:0},{label:"新款商品",value:1,tip:"这是补充信息"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:2}]),z=t([{label:"综合",value:0},{label:"销量",value:1},{label:"上架时间",value:2}]);function S(){var e;null==(e=s.value)||e.initSlider()}function U({value:e}){console.log(e)}function N({value:e}){console.log(e)}function P({value:e}){console.log(e)}function M({value:e}){console.log(e)}function O({value:e}){console.log(e)}function F({value:e}){console.log(e)}function B({value:e}){console.log(e)}function D({value:e}){console.log(e)}function Q({value:e}){console.log(e)}function A(){u.value.close()}const E=({status:e,resolve:o})=>{n.confirm({title:"异步"+(e?"打开":"关闭"),msg:`确定要${e?"打开":"关闭"}下拉菜单吗？`}).then((()=>{o(!0)})).catch((()=>{o(!1)}))};return(e,l)=>{const t=$(j("wd-message-box"),o),n=$(j("wd-drop-menu-item"),ae),I=$(j("wd-drop-menu"),te),H=$(j("demo-block"),W),L=$(j("wd-slider"),Y),q=$(j("wd-cell"),X),G=$(j("wd-button"),Z),J=V,R=$(j("wd-sort-button"),ee),oe=$(j("page-wraper"),T);return i(),r(oe,null,{default:p((()=>[c(t),c(J,{class:"demo-body",onClick:K(a)},{default:p((()=>[c(H,{title:"基本用法",transparent:""},{default:p((()=>[c(I,null,{default:p((()=>[c(n,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),options:k.value,onChange:U},null,8,["modelValue","options"]),c(n,{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),options:z.value,onChange:N},null,8,["modelValue","options"])])),_:1})])),_:1}),c(H,{title:"自定义菜单内容",transparent:""},{default:p((()=>[c(I,null,{default:p((()=>[c(n,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),options:k.value,onChange:P},null,8,["modelValue","options"]),c(n,{ref_key:"dropMenu",ref:u,title:"筛选",onOpened:S},{default:p((()=>[c(J,null,{default:p((()=>[c(L,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),ref_key:"slider",ref:s},null,8,["modelValue"]),c(q,{title:"标题文字",value:"内容"}),c(q,{title:"标题文字",label:"描述信息",value:"内容"}),c(J,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:p((()=>[c(G,{block:"",size:"large",onClick:A},{default:p((()=>[h("主要按钮")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),c(H,{title:"自定义菜单选项",transparent:""},{default:p((()=>[c(J,{class:"custom-menu"},{default:p((()=>[c(I,{"custom-style":"flex: 1; min-width: 0"},{default:p((()=>[c(n,{modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=e=>_.value=e),options:k.value,onChange:M},null,8,["modelValue","options"])])),_:1}),c(J,{style:{flex:"1"}},{default:p((()=>[c(R,{modelValue:g.value,"onUpdate:modelValue":l[5]||(l[5]=e=>g.value=e),title:"上架时间",onChange:O},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(H,{title:"自定义菜单图标",transparent:""},{default:p((()=>[c(I,null,{default:p((()=>[c(n,{title:"地图",icon:"location","icon-size":"24px"})])),_:1})])),_:1}),c(H,{title:"异步打开/关闭",transparent:""},{default:p((()=>[c(I,null,{default:p((()=>[c(n,{modelValue:x.value,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value=e),options:k.value,onChange:U,"before-toggle":E},null,8,["modelValue","options"])])),_:1})])),_:1}),c(H,{title:"向上弹出",transparent:""},{default:p((()=>[c(I,{direction:"up"},{default:p((()=>[c(n,{modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=e=>b.value=e),options:k.value,onChange:F},null,8,["modelValue","options"]),c(n,{modelValue:w.value,"onUpdate:modelValue":l[8]||(l[8]=e=>w.value=e),options:z.value,onChange:B},null,8,["modelValue","options"])])),_:1})])),_:1}),c(H,{title:"禁用",transparent:""},{default:p((()=>[c(I,{direction:"up"},{default:p((()=>[c(n,{modelValue:y.value,"onUpdate:modelValue":l[9]||(l[9]=e=>y.value=e),disabled:"",options:k.value,onChange:D},null,8,["modelValue","options"]),c(n,{modelValue:C.value,"onUpdate:modelValue":l[10]||(l[10]=e=>C.value=e),options:z.value,onChange:Q},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-668365bb"]]);export{ne as default};

import{q as e,d as t,a,b as l,_ as s}from"./page-wraper.DJ6J_9uw.js";import{d as u,S as o,r as n,y as d,V as c,q as i,X as r,e as f,f as _,w as b,g as p,z as v,A as m,n as k,C as h,D as g,k as w,b as y,c as C,h as $,u as V}from"./index-ddWhPHnE.js";import{_ as j}from"./wd-cell.DKtYKzk0.js";import{p as x,r as T,c as z}from"./clickoutside.CJmLG0WC.js";import{u as F}from"./useTouch.BqsCmmvV.js";import{b as I,c as Q,d as q,g as M,_ as O}from"./wd-icon.CdzlT4Xd.js";import{_ as S}from"./demo-block.C_jTIrrw.js";import{_ as D}from"./wd-button.D-L9G8tD.js";import"./index.CM-GNf6Q.js";const P=O(u({name:"wd-swipe-action",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...I,modelValue:Q("close"),disabled:q(!1),beforeClose:Function},emits:["click","update:modelValue"],setup(t,{expose:a,emit:l}){const s=t,u=l,y=o(e,null),C=n(""),$=n(0),V=n(0),j=n(!1),I=F(),{proxy:Q}=g();function q(e,t){s.disabled||O().then((([a,l])=>{switch(e){case"close":if(0===V.value)return;G("value",t);break;case"left":S(a);break;case"right":S(-l)}}))}function O(){return Promise.all([M(".wd-swipe-action__left",!1,Q).then((e=>e.width?e.width:0)),M(".wd-swipe-action__right",!1,Q).then((e=>e.width?e.width:0))])}function S(e=0){const t=`translate3d(${e}px, 0, 0)`,a=j.value?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";C.value=`\n        -webkit-transform: ${t};\n        -webkit-transition: ${a};\n        transform: ${t};\n        transition: ${a};\n      `,V.value=e}function D(e){s.disabled||0===V.value||(G("click",e=e||"inside"),u("click",{value:e}))}function P(e){s.disabled||($.value=V.value,I.touchStart(e),y&&y.closeOther?y.closeOther(Q):z(Q))}function X(e){if(s.disabled)return;if(I.touchMove(e),"vertical"===I.direction.value)return;e.preventDefault(),e.stopPropagation(),j.value=!0;const t=$.value+I.deltaX.value;O().then((([a,l])=>0===a&&t>0||0===l&&t<0?(S(0),P(e)):0!==a&&t>=a?(S(a),P(e)):0!==l&&-t>=l?(S(-l),P(e)):void S(t)))}function A(){if(s.disabled)return;const e=.3;j.value=!1,O().then((([t,a])=>{$.value<0&&V.value<0&&V.value-$.value<a*e?(S(-a),u("update:modelValue","right")):$.value>0&&V.value>0&&$.value-V.value<t*e?(S(t),u("update:modelValue","left")):a>0&&$.value>=0&&V.value<0&&Math.abs(V.value)>a*e?(S(-a),u("update:modelValue","right")):t>0&&$.value<=0&&V.value>0&&Math.abs(V.value)>t*e?(S(t),u("update:modelValue","left")):G("swipe")}))}function G(e,t){if("swipe"===e&&0===$.value)return S(0);"swipe"===e&&$.value>0?t="left":"swipe"===e&&$.value<0&&(t="right"),e&&t&&s.beforeClose&&s.beforeClose(e,t),S(0),"close"!==s.modelValue&&u("update:modelValue","close")}return d((()=>s.modelValue),((e,t)=>{q(e,t)}),{deep:!0}),c((()=>{y&&y.pushToQueue?y.pushToQueue(Q):x(Q),$.value=0,V.value=0,j.value=!1})),i((()=>{j.value=!0,q(s.modelValue),j.value=!1})),r((()=>{y&&y.removeFromQueue?y.removeFromQueue(Q):T(Q)})),a({close:G}),(e,t)=>{const a=w;return f(),_(a,{class:k(`wd-swipe-action ${e.customClass}`),style:m(e.customStyle),onClick:t[2]||(t[2]=h((e=>D()),["stop"])),onTouchstart:P,onTouchmove:X,onTouchend:A,onTouchcancel:A},{default:b((()=>[p(a,{class:"wd-swipe-action__wrapper",style:m(C.value)},{default:b((()=>[p(a,{class:"wd-swipe-action__left",onClick:t[0]||(t[0]=e=>D("left"))},{default:b((()=>[v(e.$slots,"left",{},void 0,!0)])),_:3}),v(e.$slots,"default",{},void 0,!0),p(a,{class:"wd-swipe-action__right",onClick:t[1]||(t[1]=e=>D("right"))},{default:b((()=>[v(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-4e3986a8"]]),X=O(u({__name:"Index",setup(e){const{closeOutside:u}=t(),o=a(),d=n("close"),c=(e,t)=>{"click"===e?o.show(`${e} ${t}导致滑动按钮关闭`):o.show(`${e}导致${t}滑动按钮关闭`)};function i(e){d.value=e}function r({value:e}){o.show(`点击${e}关闭操作按钮`)}function v(e){o.show(`点击了${e}`)}function m(){}return(e,t)=>{const a=y(C("wd-toast"),l),o=y(C("wd-cell"),j),n=w,k=y(C("wd-swipe-action"),P),g=y(C("demo-block"),S),x=y(C("wd-button"),D),T=y(C("page-wraper"),s);return f(),_(T,null,{default:b((()=>[p(a),p(n,{onClick:h(V(u),["stop"])},{default:b((()=>[p(g,{transparent:"",title:"基本用法"},{default:b((()=>[p(k,null,{right:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"},onClick:t[0]||(t[0]=e=>v("操作1"))},{default:b((()=>[$("操作1")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"},onClick:t[1]||(t[1]=e=>v("操作2"))},{default:b((()=>[$("操作2")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"},onClick:t[2]||(t[2]=e=>v("操作3"))},{default:b((()=>[$("操作3")])),_:1})])),_:1})])),default:b((()=>[p(o,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),p(g,{transparent:"",title:"左右滑动"},{default:b((()=>[p(k,null,{left:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"}},{default:b((()=>[$("操作1")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"}},{default:b((()=>[$("操作2")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"}},{default:b((()=>[$("操作3")])),_:1})])),_:1})])),right:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"}},{default:b((()=>[$("操作4")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"}},{default:b((()=>[$("操作5")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"}},{default:b((()=>[$("操作6")])),_:1})])),_:1})])),default:b((()=>[p(o,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),p(g,{transparent:"",title:"切换按钮"},{default:b((()=>[p(k,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),"before-close":c},{left:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"}},{default:b((()=>[$("操作1")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"}},{default:b((()=>[$("操作2")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"}},{default:b((()=>[$("操作3")])),_:1})])),_:1})])),right:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"}},{default:b((()=>[$("操作4")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"}},{default:b((()=>[$("操作5")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"}},{default:b((()=>[$("操作6")])),_:1})])),_:1})])),default:b((()=>[p(o,{title:"标题文字",value:"内容"})])),_:1},8,["modelValue"])])),_:1}),p(n,{class:"button-group"},{default:b((()=>[p(n,{onClick:h(m,["stop"])},{default:b((()=>[p(x,{size:"small",onClick:t[4]||(t[4]=e=>i("left"))},{default:b((()=>[$("打开左边")])),_:1})])),_:1}),p(n,{onClick:h(m,["stop"])},{default:b((()=>[p(x,{size:"small",onClick:t[5]||(t[5]=e=>i("close"))},{default:b((()=>[$("关闭所有")])),_:1})])),_:1}),p(n,{onClick:h(m,["stop"])},{default:b((()=>[p(x,{size:"small",onClick:t[6]||(t[6]=e=>i("right"))},{default:b((()=>[$("打开右边")])),_:1})])),_:1})])),_:1}),p(g,{transparent:"",title:"点击事件"},{default:b((()=>[p(k,{onClick:r},{right:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"}},{default:b((()=>[$("操作1")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"}},{default:b((()=>[$("操作2")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"}},{default:b((()=>[$("操作3")])),_:1})])),_:1})])),default:b((()=>[p(o,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),p(g,{transparent:"",title:"禁用滑动按钮"},{default:b((()=>[p(k,{disabled:""},{right:b((()=>[p(n,{class:"action"},{default:b((()=>[p(n,{class:"button",style:{background:"#fa4350"}},{default:b((()=>[$("操作1")])),_:1}),p(n,{class:"button",style:{background:"#f0883a"}},{default:b((()=>[$("操作2")])),_:1}),p(n,{class:"button",style:{background:"#4d80f0"}},{default:b((()=>[$("操作3")])),_:1})])),_:1})])),default:b((()=>[p(o,{title:"标题文字",value:"内容"})])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-cbf249d3"]]);export{X as default};

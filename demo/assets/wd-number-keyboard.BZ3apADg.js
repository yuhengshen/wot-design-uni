import{d as e,r as t,x as a,e as l,f as s,w as o,g as d,s as r,i as n,F as u,h as c,t as i,n as y,k as m,y as p,z as x,j as k,A as _,l as w}from"./index-ddWhPHnE.js";import{g as f,e as b}from"./page-wraper.DJ6J_9uw.js";import{c as h,k as g,d as v,w as K,_ as T,b as S,m as I}from"./wd-icon.CdzlT4Xd.js";import{u as V}from"./useTouch.BqsCmmvV.js";const z=T(e({name:"wd-key",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{type:h(""),text:g(""),wider:v(!1),large:v(!1),loading:v(!1)},emits:["press"],setup(e,{emit:p}){const x=e,k=p,_=V(),w=t(!1),b=a((()=>`wd-key ${x.large?"wd-key--large":""} ${"delete"===x.type?"wd-key--delete":""} ${"close"===x.type?"wd-key--close":""}`));function h(e){_.touchStart(e),w.value=!0}function g(e){_.touchMove(e),_.direction.value&&(w.value=!1)}function v(){w.value&&(w.value=!1,k("press",x.text,x.type))}return(e,t)=>{const a=m;return l(),s(a,{class:y("wd-key-wrapper "+(e.wider?"wd-key-wrapper--wider":"")),onTouchstart:h,onTouchmove:g,onTouchend:v},{default:o((()=>[d(a,{class:y(b.value)},{default:o((()=>[x.loading?(l(),s(f,{key:0,"custom-class":"wd-key__loading-icon"})):r("",!0),"delete"===e.type?(l(),n(u,{key:1},[e.text?(l(),n(u,{key:0},[c(i(e.text),1)],64)):(l(),s(K,{key:1,"custom-class":"wd-key__icon",name:"keyboard-delete",size:"22px"}))],64)):"extra"===e.type?(l(),n(u,{key:2},[e.text?(l(),n(u,{key:0},[c(i(e.text),1)],64)):(l(),s(K,{key:1,"custom-class":"wd-key__icon",name:"keyboard-collapse",size:"22px"}))],64)):(l(),n(u,{key:3},[c(i(e.text),1)],64))])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-82fa53f0"]]),A=T(e({name:"wd-number-keyboard",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...S,visible:v(!1),modelValue:h(""),title:String,mode:h("default"),zIndex:I(100),maxlength:I(1/0),showDeleteKey:v(!0),randomKeyOrder:v(!1),closeText:String,deleteText:String,closeButtonLoading:v(!1),modal:v(!1),hideOnClickOutside:v(!0),lockScroll:v(!0),safeAreaInsetBottom:v(!0),extraKey:[String,Array]},emits:["update:visible","input","close","delete","update:modelValue"],setup(e,{emit:f}){const h=e,g=f,v=t(h.visible);p((()=>h.visible),(e=>{v.value=e}));const K=a((()=>"custom"===h.mode?function(){const e=I(),t=Array.isArray(h.extraKey)?h.extraKey:[h.extraKey];1===t.length?e.push({text:0,wider:!0},{text:t[0],type:"extra"}):2===t.length&&e.push({text:t[0],type:"extra"},{text:0},{text:t[1],type:"extra"});return e}():[...I(),{text:h.extraKey,type:"extra"},{text:0},{text:h.showDeleteKey?h.deleteText:"",type:h.showDeleteKey?"delete":""}])),T=a((()=>h.closeText&&"default"===h.mode)),S=a((()=>h.title||T.value));function I(){const e=Array.from({length:9},((e,t)=>({text:t+1})));return h.randomKeyOrder?function(e){const t=[...e];for(let a=t.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t}(e):e}const V=()=>{g("close"),g("update:visible",!1)},A=(e,t)=>{if(""===e&&"extra"===t)return V();const a=h.modelValue;"delete"===t?(g("delete"),g("update:modelValue",a.slice(0,a.length-1))):"close"===t?V():a.length<+h.maxlength&&(g("input",e),g("update:modelValue",a+e))};return(e,t)=>{const a=w,p=m;return l(),s(b,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),position:"bottom","z-index":e.zIndex,"safe-area-inset-bottom":e.safeAreaInsetBottom,"modal-style":e.modal?"":"opacity: 0;",modal:e.hideOnClickOutside,lockScroll:e.lockScroll,onClickModal:V},{default:o((()=>[d(p,{class:y(`wd-number-keyboard ${e.customClass}`),style:_(e.customStyle)},{default:o((()=>[S.value?(l(),s(p,{key:0,class:"wd-number-keyboard__header"},{default:o((()=>[x(e.$slots,"title",{},(()=>[d(a,{class:"wd-number-keyboard__title"},{default:o((()=>[c(i(e.title),1)])),_:1})]),!0),T.value?(l(),s(p,{key:0,class:"wd-number-keyboard__close","hover-class":"wd-number-keyboard__close--hover",onClick:V},{default:o((()=>[d(a,null,{default:o((()=>[c(i(e.closeText),1)])),_:1})])),_:1})):r("",!0)])),_:3})):r("",!0),d(p,{class:"wd-number-keyboard__body"},{default:o((()=>[d(p,{class:"wd-number-keyboard__keys"},{default:o((()=>[(l(!0),n(u,null,k(K.value,(e=>(l(),s(z,{key:e.text,text:e.text,type:e.type,wider:e.wider,onPress:A},null,8,["text","type","wider"])))),128))])),_:1}),"custom"===e.mode?(l(),s(p,{key:0,class:"wd-number-keyboard__sidebar"},{default:o((()=>[e.showDeleteKey?(l(),s(z,{key:0,large:"",text:e.deleteText,type:"delete",onPress:A},null,8,["text"])):r("",!0),d(z,{large:"",text:e.closeText,type:"close",loading:e.closeButtonLoading,onPress:A},null,8,["text","loading"])])),_:1})):r("",!0)])),_:1})])),_:3},8,["class","style"])])),_:3},8,["modelValue","z-index","safe-area-inset-bottom","modal-style","modal","lockScroll"])}}}),[["__scopeId","data-v-e2519f6d"]]);export{A as _};
